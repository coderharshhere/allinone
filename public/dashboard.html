<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AllInOne MP – Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap');
body {
font-family: 'Noto Sans Devanagari', sans-serif;
background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
}
.status-badge {
padding: 4px 10px;
border-radius: 20px;
font-weight: 600;
font-size: 0.85rem;
display: inline-block;
}
.status-pending { background: #fff8e6; color: #e69500; border: 1px solid #ffd54f; }
.status-complete { background: #e8f5e9; color: #2e76d2; border: 1px solid #81c784; }
.status-reject { background: #ffebee; color: #c62828; border: 1px solid #ef9a9a; }
.action-btn {
transition: all 0.2s ease;
width: 32px;
height: 32px;
display: inline-flex;
align-items: center;
justify-content: center;
border-radius: 8px;
}
.action-btn:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}
.action-view { background: #e3f2fd; color: #1976d2; }
.action-delete { background: #ffebee; color: #c62828; }
.action-edit { background: #e8f5e9; color: #2e7d32; }
.table-row:hover {
background-color: #f8fafc;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
.filter-container {
background: white;
border-radius: 16px;
box-shadow: 0 4px 12px rgba(0,0,0,0.08);
padding: 1.25rem;
margin-bottom: 1.5rem;
}
.stats-card {
border-radius: 16px;
box-shadow: 0 4px 12px rgba(0,0,0,0.08);
transition: transform 0.3s ease, box-shadow 0.3s ease;
position: relative;
overflow: hidden;
}
.stats-card:hover {
transform: translateY(-3px);
box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}
.stats-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 5px;
height: 100%;
}
.stats-total::before { background: linear-gradient(to bottom, #1e3a8a, #3b82f6); }
.stats-pending::before { background: linear-gradient(to bottom, #b45309, #f59e0b); }
.stats-complete::before { background: linear-gradient(to bottom, #166534, #22c55e); }
.stats-rejected::before { background: linear-gradient(to bottom, #b91c1c, #ef4444); }
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
.fade-in {
animation: fadeIn 0.5s ease forwards;
}
.loading-spinner {
width: 40px;
height: 40px;
border: 4px solid rgba(59, 130, 246, 0.2);
border-top: 4px solid #3b82f6;
border-radius: 50%;
animation: spin 1s linear infinite;
margin: 2rem auto;
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
.empty-state {
text-align: center;
padding: 3rem;
color: #64748b;
}
.empty-state i {
font-size: 3.5rem;
margin-bottom: 1rem;
opacity: 0.7;
}
.empty-state h3 {
font-size: 1.5rem;
margin-bottom: 0.5rem;
font-weight: 600;
}
/* ===== PDF STYLES ===== */
#pdfContent {
position: fixed;
top: -9999px;
left: -9999px;
width: 794px;
min-height: 1123px;
background: #ffffff;
visibility: visible;
opacity: 1;
z-index: -9999;
}
.pdf-page {
background: white;
padding: 95px;
position: relative;
width: 794px !important;
min-height: 1123px !important;
height: auto !important;
font-family: 'Noto Sans Devanagari', 'Arial Unicode MS', 'Mangal', 'Nirmala UI', sans-serif !important;
font-size: 14px !important;
line-height: 1.6 !important;
color: #334155 !important;
-webkit-font-smoothing: antialiased !important;
-moz-osx-font-smoothing: grayscale !important;
text-rendering: optimizeLegibility !important;
box-sizing: border-box !important;
margin: 0 !important;
}
.pdf-header {
text-align: center;
margin-bottom: 30px;
border-bottom: 3px solid #1e3a8a;
padding-bottom: 15px;
}
.pdf-title {
font-size: 24px !important;
font-weight: 700 !important;
color: #1e3a8a !important;
margin: 5px 0 !important;
line-height: 1.3 !important;
}
.pdf-subtitle {
color: #4b5563 !important;
font-size: 16px !important;
}
.pdf-app-no {
background: #dbeafe;
display: inline-block;
padding: 5px 15px;
border-radius: 20px;
font-weight: 600;
margin: 10px 0;
}
.pdf-details-table {
width: 100% !important;
border-collapse: collapse !important;
margin: 25px 0 !important;
table-layout: fixed !important;
}
.pdf-details-table th {
background-color: #1e3a8a !important;
color: white !important;
text-align: left !important;
padding: 12px 15px !important;
font-weight: 600 !important;
border: 1px solid #cbd5e1 !important;
word-break: break-word !important;
}
.pdf-details-table td {
padding: 10px 15px !important;
border: 1px solid #cbd5e1 !important;
word-break: break-word !important;
vertical-align: top !important;
line-height: 1.5 !important;
}
.pdf-details-table tr:nth-child(even) {
background-color: #f8fafc !important;
}
.pdf-footer {
margin-top: 30px;
text-align: center;
font-size: 14px !important;
color: #64748b !important;
border-top: 1px solid #e2e8f0;
padding-top: 15px;
}
.pdf-qr-container {
position: absolute !important;
top: 95px !important;
right: 95px !important;
width: 120px !important;
height: 120px !important;
border: 1px solid #cbd5e1 !important;
padding: 8px !important;
background: white !important;
border-radius: 8px !important;
box-sizing: border-box !important;
z-index: 100 !important;
overflow: hidden !important;
}
.pdf-qr-container img,
.pdf-qr-container canvas {
width: 100% !important;
height: 100% !important;
display: block !important;
object-fit: contain !important;
image-rendering: -moz-crisp-edges !important;
image-rendering: -webkit-crisp-edges !important;
image-rendering: crisp-edges !important;
}
@media print {
body * {
visibility: hidden;
}
#pdfContent,
#pdfContent * {
visibility: visible;
}
#pdfContent {
position: absolute;
left: 0;
top: 0;
}
}
</style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
<!-- HEADER -->
<header class="bg-gradient-to-r from-blue-900 to-blue-700 text-white shadow-lg sticky top-0 z-50">
<div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center">
<div class="flex items-center gap-3 mb-3 md:mb-0">
<div class="bg-white p-1.5 rounded-lg">
<div class="bg-blue-900 w-10 h-10 md:w-12 md:h-12 rounded flex items-center justify-center">
<span class="text-white font-bold text-xl md:text-2xl">MP</span>
</div>
</div>
<div>
<h1 class="text-xl md:text-2xl font-bold flex items-center">
<i class="fas fa-landmark mr-2"></i>
AllInOne-MP
</h1>
<p class="text-xs md:text-sm opacity-90">मध्य प्रदेश सरकार - एक विंडो समाधान</p>
</div>
</div>
<div class="flex flex-col md:flex-row items-center gap-4">
<div class="text-center md:text-right">
<p class="text-xs opacity-90 uppercase flex items-center justify-center md:justify-end">
<i class="fas fa-headset mr-1"></i> सहायता केंद्र
</p>
<p class="font-bold text-lg flex items-center justify-center md:justify-end">
<i class="fas fa-phone-alt mr-2 text-yellow-300"></i> 8435273042
</p>
</div>
<div class="relative group">
<div class="flex items-center cursor-pointer p-2 hover:bg-white/10 rounded-full transition" id="profileButton">
<div class="bg-yellow-300 text-blue-900 font-bold w-9 h-9 rounded-full flex items-center justify-center text-lg">
<i class="fas fa-user"></i>
</div>
<div class="ml-2 hidden md:block">
<p class="font-bold text-sm" id="adminName">लोड हो रहा है...</p>
<p class="text-xs opacity-90" id="adminEmail">-</p>
</div>
<i class="fas fa-chevron-down ml-1 text-xs hidden md:block"></i>
</div>
<div class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl py-2 z-50 hidden" id="profileDropdown">
<a href="#" class="flex items-center px-4 py-2 text-gray-800 hover:bg-blue-50 transition">
<i class="fas fa-user-circle mr-3 text-blue-600"></i> प्रोफ़ाइल
</a>
<a href="#" class="flex items-center px-4 py-2 text-gray-800 hover:bg-blue-50 transition">
<i class="fas fa-cog mr-3 text-blue-600"></i> सेटिंग्स
</a>
<div class="border-t my-1"></div>
<a href="#" onclick="logout()" class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition">
<i class="fas fa-sign-out-alt mr-3"></i> लॉगआउट
</a>
</div>
</div>
</div>
</header>
<!-- MAIN CONTENT -->
<main class="flex-1 container mx-auto px-4 py-6">
<!-- Search and Filters -->
<div class="filter-container fade-in">
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
<div class="md:col-span-1">
<div class="relative">
<input id="searchInput" placeholder="नाम या ID से खोजें..."
class="border border-gray-300 p-3 w-full pl-10 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
<i class="fas fa-search absolute left-3 top-3.5 text-gray-400"></i>
</div>
</div>
<div>
<select id="serviceFilter" class="border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
<option value="">सभी सेवाएं</option>
<option value="samagra">समग्र आईडी</option>
<option value="ekyc">ई-केवाईसी</option>
<option value="mpbhoj">एमपी भोज योजना</option>
<option value="scholarship">छात्रवृत्ति</option>
<option value="pension">पेंशन</option>
</select>
</div>
<div>
<select id="statusFilter" class="border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
<option value="">सभी स्थितियां</option>
<option value="pending">लंबित</option>
<option value="complete">पूर्ण</option>
<option value="reject">अस्वीकृत</option>
</select>
</div>
<div class="flex items-end">
<button id="clearFilters" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg w-full transition flex items-center justify-center">
<i class="fas fa-redo mr-2"></i> फ़िल्टर साफ़ करें
</button>
</div>
</div>
<div class="flex flex-col sm:flex-row justify-between items-center gap-3 pt-2 border-t border-gray-100">
<div class="flex flex-wrap gap-2">
<button id="exportCSV" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition flex items-center">
<i class="fas fa-file-csv mr-2"></i> CSV निर्यात
</button>
<button id="printView" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition flex items-center">
<i class="fas fa-print mr-2"></i> प्रिंट व्यू
</button>
</div>
<div class="text-sm text-gray-600 flex items-center">
<i class="fas fa-info-circle mr-2 text-blue-500"></i>
<span>कुल आवेदन: <span id="totalApplications" class="font-bold text-blue-700">0</span></span>
</div>
</div>
</div>
<!-- Statistics Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 fade-in">
<div class="stats-card stats-total bg-white p-6">
<div class="flex items-center">
<div class="bg-blue-100 p-3 rounded-xl mr-4">
<i class="fas fa-file-alt text-blue-600 text-2xl"></i>
</div>
<div>
<p class="text-gray-500 text-sm font-medium">कुल आवेदन</p>
<p class="text-2xl font-bold text-gray-800 mt-1" id="statTotal">0</p>
</div>
</div>
</div>
<div class="stats-card stats-pending bg-white p-6">
<div class="flex items-center">
<div class="bg-amber-100 p-3 rounded-xl mr-4">
<i class="fas fa-clock text-amber-500 text-2xl"></i>
</div>
<div>
<p class="text-gray-500 text-sm font-medium">लंबित</p>
<p class="text-2xl font-bold text-gray-800 mt-1" id="statPending">0</p>
</div>
</div>
</div>
<div class="stats-card stats-complete bg-white p-6">
<div class="flex items-center">
<div class="bg-green-100 p-3 rounded-xl mr-4">
<i class="fas fa-check-circle text-green-600 text-2xl"></i>
</div>
<div>
<p class="text-gray-500 text-sm font-medium">पूर्ण</p>
<p class="text-2xl font-bold text-gray-800 mt-1" id="statComplete">0</p>
</div>
</div>
</div>
<div class="stats-card stats-rejected bg-white p-6">
<div class="flex items-center">
<div class="bg-red-100 p-3 rounded-xl mr-4">
<i class="fas fa-times-circle text-red-600 text-2xl"></i>
</div>
<div>
<p class="text-gray-500 text-sm font-medium">अस्वीकृत</p>
<p class="text-2xl font-bold text-gray-800 mt-1" id="statRejected">0</p>
</div>
</div>
</div>
</div>
<!-- Applications Table -->
<div class="bg-white rounded-2xl shadow-lg overflow-hidden fade-in">
<div class="p-4 md:p-6 border-b border-gray-100 flex flex-col md:flex-row justify-between items-center">
<h2 class="text-xl md:text-2xl font-bold text-gray-800 flex items-center">
<i class="fas fa-list mr-3 text-blue-600"></i>
आवेदन सूची
</h2>
<div class="mt-3 md:mt-0 flex flex-wrap gap-2">
<div class="relative">
<input type="date" id="dateFrom" class="border border-gray-300 p-2 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<label class="absolute -top-2 left-2 bg-white px-1 text-xs text-gray-500">से</label>
</div>
<div class="relative">
<input type="date" id="dateTo" class="border border-gray-300 p-2 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<label class="absolute -top-2 left-2 bg-white px-1 text-xs text-gray-500">तक</label>
</div>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full text-sm">
<thead class="bg-blue-800 text-white">
<tr>
<th class="p-4 text-left font-medium">आवेदन क्रमांक</th>
<th class="p-4 text-left font-medium">नाम</th>
<th class="p-4 text-left font-medium">सेवा प्रकार</th>
<th class="p-4 text-left font-medium hidden md:table-cell">समग्र / सदस्य ID</th>
<th class="p-4 text-left font-medium hidden sm:table-cell">तारीख</th>
<th class="p-4 text-left font-medium">स्थिति</th>
<th class="p-4 text-left font-medium">कार्रवाई</th>
</tr>
</thead>
<tbody id="dataTable">
<!-- Loading state -->
<tr>
<td colspan="7" class="p-8 text-center">
<div class="loading-spinner"></div>
<p class="mt-4 text-gray-600 font-medium">डेटा लोड हो रहा है...</p>
</td>
</tr>
</tbody>
</table>
</div>
<div id="emptyState" class="empty-state hidden">
<i class="fas fa-file-search text-blue-300"></i>
<h3>कोई आवेदन नहीं मिला</h3>
<p class="mt-2">आपके फ़िल्टर मानदंडों से मेल खाने वाला कोई आवेदन नहीं मिला।</p>
<button id="resetFilters" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center mx-auto">
<i class="fas fa-filter mr-2"></i> फ़िल्टर रीसेट करें
</button>
</div>
<div class="p-4 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center">
<p class="text-gray-500 text-sm mb-2 sm:mb-0">प्रति पृष्ठ दिखाएं:
<select id="pageSize" class="border border-gray-300 rounded px-2 py-1 ml-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<option>10</option>
<option>25</option>
<option selected>50</option>
<option>100</option>
</select>
</p>
<div class="flex items-center space-x-2">
<button id="prevPage" class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition">पिछला</button>
<span id="pageInfo" class="font-medium">1 से 10 का 0</span>
<button id="nextPage" class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition">अगला</button>
</div>
</div>
</div>
</main>
<!-- DETAILS MODAL -->
<div id="detailModal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50 p-4">
<div class="bg-white w-full max-w-4xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
<div class="bg-gradient-to-r from-blue-800 to-blue-600 text-white p-5 flex justify-between items-center rounded-t-2xl">
<h2 class="font-bold text-xl flex items-center">
<i class="fas fa-file-invoice mr-3"></i>
आवेदन विवरण
</h2>
<div class="flex space-x-3">
<button onclick="printApplication()" class="bg-white text-blue-800 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition flex items-center">
<i class="fas fa-print mr-2"></i> प्रिंट
</button>
<button onclick="downloadPDF()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition flex items-center">
<i class="fas fa-file-pdf mr-2"></i> PDF डाउनलोड
</button>
<button onclick="closeDetails()" class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition">
<i class="fas fa-times"></i>
</button>
</div>
</div>
<div id="detailBody" class="p-6 grid grid-cols-1 md:grid-cols-2 gap-5 overflow-y-auto flex-1">
<!-- Content will be dynamically inserted here -->
</div>
<div class="p-5 bg-gray-50 border-t border-gray-100 rounded-b-2xl">
<div class="flex flex-col sm:flex-row justify-between items-center gap-3">
<div class="flex items-center text-sm text-gray-600">
<i class="fas fa-info-circle mr-2 text-blue-500"></i>
<span>आवेदन क्रमांक: <span id="modalApplicationNo" class="font-bold text-blue-700">AIO-XXXXXXXX</span></span>
</div>
<div class="flex space-x-3">
<button onclick="updateStatus('pending')" class="bg-amber-100 text-amber-800 px-4 py-2 rounded-lg font-medium hover:bg-amber-200 transition flex items-center">
<i class="fas fa-clock mr-2"></i> लंबित रखें
</button>
<button onclick="updateStatus('complete')" class="bg-green-100 text-green-800 px-4 py-2 rounded-lg font-medium hover:bg-green-200 transition flex items-center">
<i class="fas fa-check mr-2"></i> पूर्ण करें
</button>
<button onclick="updateStatus('reject')" class="bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium hover:bg-red-200 transition flex items-center">
<i class="fas fa-times mr-2"></i> अस्वीकार करें
</button>
</div>
</div>
</div>
</div>
</div>
<!-- PDF TEMPLATE -->
<div id="pdfContent">
<div class="pdf-page">
<div class="pdf-header">
<div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px;">
<div style="background: #1e3a8a; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px;">
MP
</div>
<div style="text-align: left;">
<div style="font-size: 18px; font-weight: bold; color: #1e3a8a;">मध्य प्रदेश सरकार</div>
<div style="font-size: 14px; color: #4b5563;">Government of Madhya Pradesh</div>
</div>
</div>
<h1 class="pdf-title">AllInOne MP पोर्टल - आवेदन विवरण</h1>
<p class="pdf-subtitle">सभी सरकारी सेवाओं के लिए एकल खिड़की प्रणाली</p>
<div class="pdf-app-no">आवेदन क्रमांक: <span id="pdfApplicationNo">AIO-XXXXXXXX</span></div>
</div>
<div class="pdf-qr-container" id="pdfQR"></div>
<table class="pdf-details-table">
<thead>
<tr>
<th style="width: 35%;">विवरण</th>
<th style="width: 65%;">मान</th>
</tr>
</thead>
<tbody id="pdfDetailsTable">
<!-- Content will be dynamically inserted here -->
</tbody>
</table>
<div class="pdf-footer">
<p>यह दस्तावेज़ डिजिटल रूप से जनरेट किया गया है और इस पर अधिकारी के हस्ताक्षर की आवश्यकता नहीं है।</p>
<p class="mt-1">पोर्टल: allinone.mp.gov.in | सहायता: 8435273042</p>
<p class="mt-2">डाउनलोड तिथि: <span id="pdfDownloadDate"></span></p>
</div>
</div>
</div>
<!-- FOOTER -->
<footer class="bg-gray-900 text-gray-300 py-8 px-4 mt-auto">
<div class="container mx-auto text-center">
<div class="flex justify-center space-x-6 mb-4">
<a href="https://www.facebook.com/allin1mp" class="hover:text-white transition flex items-center">
<i class="fab fa-facebook-f mr-2"></i> Facebook
</a>
<a href="https://www.x.com/allin1mp" class="hover:text-white transition flex items-center">
<i class="fab fa-twitter mr-2"></i> Twitter
</a>
<a href="https://www.youtube.com/allin1mp" class="hover:text-white transition flex items-center">
<i class="fab fa-youtube mr-2"></i> YouTube
</a>
<a href="https://www.harshtiwari.in" class="hover:text-white transition flex items-center">
<i class="fas fa-globe mr-2"></i> आधिकारिक वेबसाइट
</a>
</div>
<p class="font-medium">© 2026 AllInOne MP </p>
<p class="text-xs mt-2 text-gray-400">ALLINONEMP</p>
<div class="mt-4 flex justify-center space-x-4">
<span class="bg-blue-900 text-white text-xs px-3 py-1 rounded-full">सुरक्षित</span>
<span class="bg-green-800 text-white text-xs px-3 py-1 rounded-full">प्रमाणित</span>
</div>
</div>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, collection, onSnapshot, doc, updateDoc, deleteDoc, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA-iZvVroV-H6aRs7X-mlnt_ra3_vnaNzg",
  authDomain: "allinone-aa89.firebaseapp.com",
  projectId: "allinone-aa89",
  storageBucket: "allinone-aa89.firebasestorage.app",
  messagingSenderId: "1090634328590",
  appId: "1:1090634328590:web:9c043124401353c80e4a20"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

let allApplications = [];
let filteredApplications = [];
let currentApp = null;
let currentPage = 1;
let pageSize = 50;

// =============================================
// Auth & Data Loading
// =============================================
onAuthStateChanged(auth, user => {
  if (!user) {
    window.location.href = "login.html";
    return;
  }
  document.getElementById('adminName').textContent = user.displayName || user.email.split('@')[0];
  document.getElementById('adminEmail').textContent = user.email || '-';
  loadData();
  setupEventListeners();
});

async function loadData() {
  try {
    const collections = ["applications", "samagra_ekyc_requests", "mpbhojApplications"];
    allApplications = [];
    
    for (const col of collections) {
      const q = query(collection(db, col));
      const snapshot = await getDocs(q);
      const docs = snapshot.docs.map(d => ({
        id: d.id,
        _collection: col,
        ...d.data()
      }));
      allApplications.push(...docs);
    }
    
    filteredApplications = [...allApplications];
    renderTable();
    updateStats();
    updatePaginationInfo();
  } catch (error) {
    console.error("डेटा लोड करने में त्रुटि:", error);
    document.getElementById("dataTable").innerHTML = `
      <tr><td colspan="7" class="p-8 text-center text-red-600">
        <i class="fas fa-exclamation-triangle mb-2 text-2xl"></i><br>
        डेटा लोड करने में त्रुटि
      </td></tr>`;
  }
}

// =============================================
// Event Listeners Setup
// =============================================
function setupEventListeners() {
  // Profile dropdown
  document.getElementById('profileButton')?.addEventListener('click', () => {
    document.getElementById('profileDropdown')?.classList.toggle('hidden');
  });
  
  // Click outside to close dropdown
  document.addEventListener('click', (e) => {
    if (!e.target.closest('#profileButton') && !e.target.closest('#profileDropdown')) {
      document.getElementById('profileDropdown')?.classList.add('hidden');
    }
  });
  
  // Search input
  document.getElementById('searchInput')?.addEventListener('input', applyFilters);
  
  // Filters
  document.getElementById('serviceFilter')?.addEventListener('change', applyFilters);
  document.getElementById('statusFilter')?.addEventListener('change', applyFilters);
  document.getElementById('dateFrom')?.addEventListener('change', applyFilters);
  document.getElementById('dateTo')?.addEventListener('change', applyFilters);
  
  // Clear filters
  document.getElementById('clearFilters')?.addEventListener('click', () => {
    document.getElementById('searchInput').value = '';
    document.getElementById('serviceFilter').value = '';
    document.getElementById('statusFilter').value = '';
    document.getElementById('dateFrom').value = '';
    document.getElementById('dateTo').value = '';
    applyFilters();
  });
  
  // Reset filters
  document.getElementById('resetFilters')?.addEventListener('click', () => {
    document.getElementById('searchInput').value = '';
    document.getElementById('serviceFilter').value = '';
    document.getElementById('statusFilter').value = '';
    document.getElementById('dateFrom').value = '';
    document.getElementById('dateTo').value = '';
    applyFilters();
  });
  
  // Pagination
  document.getElementById('pageSize')?.addEventListener('change', (e) => {
    pageSize = parseInt(e.target.value);
    currentPage = 1;
    renderTable();
    updatePaginationInfo();
  });
  
  document.getElementById('prevPage')?.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderTable();
      updatePaginationInfo();
    }
  });
  
  document.getElementById('nextPage')?.addEventListener('click', () => {
    const totalPages = Math.ceil(filteredApplications.length / pageSize);
    if (currentPage < totalPages) {
      currentPage++;
      renderTable();
      updatePaginationInfo();
    }
  });
  
  // Export CSV
  document.getElementById('exportCSV')?.addEventListener('click', exportToCSV);
  
  // Print View
  document.getElementById('printView')?.addEventListener('click', () => {
    window.print();
  });
}

// =============================================
// Filter Logic
// =============================================
function applyFilters() {
  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
  const serviceFilter = document.getElementById('serviceFilter').value;
  const statusFilter = document.getElementById('statusFilter').value;
  const dateFrom = document.getElementById('dateFrom').value;
  const dateTo = document.getElementById('dateTo').value;
  
  filteredApplications = allApplications.filter(app => {
    // Search filter
    const name = (app.applicantName || app.studentName || '').toLowerCase();
    const appId = app.id.toLowerCase();
    if (searchTerm && !name.includes(searchTerm) && !appId.includes(searchTerm)) {
      return false;
    }
    
    // Service filter
    if (serviceFilter) {
      const service = getServiceName(app).toLowerCase();
      if (!service.includes(serviceFilter.toLowerCase())) {
        return false;
      }
    }
    
    // Status filter
    if (statusFilter && app.status !== statusFilter) {
      return false;
    }
    
    // Date filter
    if (dateFrom || dateTo) {
      const appDate = app.createdAt?.toDate ? app.createdAt.toDate() : new Date(app.createdAt || 0);
      if (dateFrom && appDate < new Date(dateFrom)) {
        return false;
      }
      if (dateTo) {
        const toDate = new Date(dateTo);
        toDate.setHours(23, 59, 59, 999);
        if (appDate > toDate) {
          return false;
        }
      }
    }
    
    return true;
  });
  
  currentPage = 1;
  renderTable();
  updateStats();
  updatePaginationInfo();
  
  // Show/hide empty state
  const emptyState = document.getElementById('emptyState');
  const table = document.querySelector('tbody');
  if (filteredApplications.length === 0) {
    emptyState.classList.remove('hidden');
    table.classList.add('hidden');
  } else {
    emptyState.classList.add('hidden');
    table.classList.remove('hidden');
  }
}

// =============================================
// Table Rendering
// =============================================
function renderTable() {
  const tbody = document.getElementById("dataTable");
  if (!tbody) return;
  
  const startIndex = (currentPage - 1) * pageSize;
  const endIndex = startIndex + pageSize;
  const pageApps = filteredApplications.slice(startIndex, endIndex);
  
  if (pageApps.length === 0) {
    tbody.innerHTML = `
      <tr>
        <td colspan="7" class="p-8 text-center">
          <i class="fas fa-inbox text-4xl text-gray-300 mb-3"></i>
          <p class="text-gray-600 font-medium">कोई आवेदन नहीं मिला</p>
        </td>
      </tr>`;
    return;
  }
  
  let html = '';
  pageApps.forEach(item => {
    const appNo = `AIO-${item.id.substring(0,8).toUpperCase()}`;
    const name = item.studentName || item.applicantName || item.name || "—";
    const service = getServiceName(item);
    const statusText = item.status === 'complete' ? 'पूर्ण' : 
                       item.status === 'reject' ? 'अस्वीकृत' : 'लंबित';
    const statusClass = `status-${item.status || 'pending'}`;
    
    html += `
      <tr class="table-row border-b border-gray-100">
        <td class="p-4 font-mono text-blue-700">${appNo}</td>
        <td class="p-4 font-bold">${name}</td>
        <td class="p-4"><span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">${service}</span></td>
        <td class="p-4 hidden md:table-cell">${item.memberId || item.samagraId || "—"}</td>
        <td class="p-4 hidden sm:table-cell">${formatDate(item.createdAt)}</td>
        <td class="p-4"><span class="status-badge ${statusClass}">${statusText}</span></td>
        <td class="p-4 flex gap-2">
          <button onclick="openDetails('${item.id}')" class="action-btn action-view">
            <i class="fas fa-eye"></i>
          </button>
          <button onclick="del('${item.id}')" class="action-btn action-delete">
            <i class="fas fa-trash-alt"></i>
          </button>
        </td>
      </tr>`;
  });
  
  tbody.innerHTML = html;
}

// =============================================
// Helper Functions
// =============================================
function getServiceName(item) {
  if (item._collection === 'samagra_ekyc_requests') {
    return 'समग्र ई-केवाईसी';
  } else if (item._collection === 'mpbhojApplications') {
    return 'एमपी भोज योजना';
  }
  return item.serviceType || item.formType || item.serviceName || item.applicationType || 'अन्य';
}

function formatDate(ts) {
  if (!ts) return "—";
  try {
    const d = ts.toDate ? ts.toDate() : new Date(ts);
    return d.toLocaleDateString("hi-IN", { 
      day: '2-digit', 
      month: 'short', 
      year: 'numeric' 
    });
  } catch {
    return "—";
  }
}

function updateStats() {
  const total = filteredApplications.length;
  const pending = filteredApplications.filter(a => a.status === 'pending').length;
  const complete = filteredApplications.filter(a => a.status === 'complete').length;
  const rejected = filteredApplications.filter(a => a.status === 'reject').length;
  
  document.getElementById('statTotal').textContent = total;
  document.getElementById('statPending').textContent = pending;
  document.getElementById('statComplete').textContent = complete;
  document.getElementById('statRejected').textContent = rejected;
  document.getElementById('totalApplications').textContent = total;
}

function updatePaginationInfo() {
  const total = filteredApplications.length;
  const totalPages = Math.ceil(total / pageSize);
  const start = ((currentPage - 1) * pageSize) + 1;
  const end = Math.min(currentPage * pageSize, total);
  
  document.getElementById('pageInfo').textContent = 
    `${start} से ${end} का ${total}`;
  
  // Enable/disable pagination buttons
  document.getElementById('prevPage').disabled = currentPage === 1;
  document.getElementById('nextPage').disabled = currentPage === totalPages || total === 0;
}

// =============================================
// Modal Functions
// =============================================
window.openDetails = (id) => {
  const item = allApplications.find(a => a.id === id);
  if (!item) return alert("आवेदन नहीं मिला");
  
  const appNo = `AIO-${id.substring(0,8).toUpperCase()}`;
  currentApp = { item, appNo };
  
  document.getElementById("modalApplicationNo").textContent = appNo;
  document.getElementById("modalApplicationNo").dataset.appId = id;
  
  // Prepare modal content
  const detailBody = document.getElementById("detailBody");
  detailBody.innerHTML = generateDetailHTML(item);
  
  document.getElementById("detailModal").classList.remove("hidden");
  document.getElementById("detailModal").classList.add("flex");
};

function generateDetailHTML(item) {
  return `
    <div class="col-span-2 md:col-span-1">
      <h3 class="font-bold text-lg mb-3 text-blue-800 flex items-center">
        <i class="fas fa-user mr-2"></i> आवेदक विवरण
      </h3>
      <div class="space-y-2">
        <p><strong>नाम:</strong> ${item.applicantName || item.studentName || "—"}</p>
        <p><strong>पिता का नाम:</strong> ${item.fatherName || "—"}</p>
        <p><strong>लिंग:</strong> ${item.gender === "male" ? "पुरुष" : item.gender === "female" ? "महिला" : item.gender || "—"}</p>
        <p><strong>जन्म तिथि:</strong> ${formatDate(item.dob)}</p>
        <p><strong>आयु:</strong> ${item.age || "—"}</p>
      </div>
    </div>
    
    <div class="col-span-2 md:col-span-1">
      <h3 class="font-bold text-lg mb-3 text-blue-800 flex items-center">
        <i class="fas fa-address-card mr-2"></i> संपर्क विवरण
      </h3>
      <div class="space-y-2">
        <p><strong>मोबाइल:</strong> ${item.phone || item.mobile || "—"}</p>
        <p><strong>ईमेल:</strong> ${item.email || "—"}</p>
        <p><strong>पता:</strong> ${item.address || "—"}</p>
        <p><strong>जिला:</strong> ${item.district || "—"}</p>
        <p><strong>तहसील:</strong> ${item.tehsil || "—"}</p>
      </div>
    </div>
    
    <div class="col-span-2 md:col-span-1">
      <h3 class="font-bold text-lg mb-3 text-blue-800 flex items-center">
        <i class="fas fa-file-alt mr-2"></i> आवेदन विवरण
      </h3>
      <div class="space-y-2">
        <p><strong>सेवा प्रकार:</strong> ${getServiceName(item)}</p>
        <p><strong>आवेदन ID:</strong> ${item.id}</p>
        <p><strong>समग्र ID:</strong> ${item.samagraId || item.memberId || "—"}</p>
        <p><strong>आवेदन तिथि:</strong> ${formatDate(item.createdAt)}</p>
        <p><strong>अंतिम अपडेट:</strong> ${formatDate(item.updatedAt)}</p>
      </div>
    </div>
    
    <div class="col-span-2 md:col-span-1">
      <h3 class="font-bold text-lg mb-3 text-blue-800 flex items-center">
        <i class="fas fa-info-circle mr-2"></i> स्थिति विवरण
      </h3>
      <div class="space-y-2">
        <p><strong>वर्तमान स्थिति:</strong> 
          <span class="status-badge status-${item.status || 'pending'}">
            ${item.status === 'complete' ? 'पूर्ण' : item.status === 'reject' ? 'अस्वीकृत' : 'लंबित'}
          </span>
        </p>
        <p><strong>टिप्पणी:</strong> ${item.comments || item.remarks || "कोई टिप्पणी नहीं"}</p>
        <p><strong>अधिकारी नाम:</strong> ${item.officerName || "—"}</p>
        <p><strong>अनुमोदन तिथि:</strong> ${formatDate(item.approvedAt)}</p>
      </div>
    </div>`;
}

window.closeDetails = () => {
  document.getElementById("detailModal").classList.add("hidden");
  document.getElementById("detailModal").classList.remove("flex");
};

// =============================================
// Status Update
// =============================================
window.updateStatus = async (newStatus) => {
  if (!currentApp) return;
  
  const { item } = currentApp;
  const confirmMsg = newStatus === 'complete' ? 'क्या आप इस आवेदन को पूर्ण करना चाहते हैं?' :
                     newStatus === 'reject' ? 'क्या आप इस आवेदन को अस्वीकार करना चाहते हैं?' :
                     'क्या आप इस आवेदन को लंबित करना चाहते हैं?';
  
  if (!confirm(confirmMsg)) return;
  
  try {
    await updateDoc(doc(db, item._collection, item.id), { 
      status: newStatus,
      updatedAt: new Date()
    });
    
    alert(`स्थिति अपडेट हो गई: ${newStatus === 'complete' ? 'पूर्ण' : newStatus === 'reject' ? 'अस्वीकृत' : 'लंबित'}`);
    closeDetails();
    loadData(); // Reload data to reflect changes
  } catch (err) {
    console.error("स्थिति अपडेट में त्रुटि:", err);
    alert("स्थिति अपडेट में त्रुटि हुई");
  }
};

// =============================================
// Delete Application
// =============================================
window.del = async (id) => {
  if (!confirm("क्या आप वाकई इस आवेदन को हटाना चाहते हैं? यह क्रिया वापस नहीं की जा सकती।")) return;
  
  const item = allApplications.find(x => x.id === id);
  if (!item) return alert("आवेदन नहीं मिला");
  
  try {
    await deleteDoc(doc(db, item._collection, item.id));
    alert("आवेदन सफलतापूर्वक हटा दिया गया");
    loadData(); // Reload data
  } catch (err) {
    console.error("हटाने में त्रुटि:", err);
    alert("आवेदन हटाने में त्रुटि हुई");
  }
};

// =============================================
// QR Code Generation
// =============================================
function createQRImageDataUrl(text, size = 110) {
  return new Promise(resolve => {
    const container = document.createElement('div');
    container.style.position = 'absolute';
    container.style.left = '-9999px';
    container.style.top = '-9999px';
    document.body.appendChild(container);
    
    try {
      new QRCode(container, {
        text: text,
        width: size,
        height: size,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
      });
      
      setTimeout(() => {
        const canvas = container.querySelector('canvas');
        if (canvas) {
          const dataUrl = canvas.toDataURL('image/png');
          document.body.removeChild(container);
          resolve(dataUrl);
        } else {
          document.body.removeChild(container);
          resolve(null);
        }
      }, 500);
    } catch (err) {
      document.body.removeChild(container);
      resolve(null);
    }
  });
}

// =============================================
// PDF Functions
// =============================================
function preparePDF(item, appNo) {
  document.getElementById("pdfApplicationNo").textContent = appNo;
  document.getElementById("pdfDownloadDate").textContent = new Date().toLocaleDateString("hi-IN", {
    day: "numeric", 
    month: "long", 
    year: "numeric"
  });
  
  const tbody = document.getElementById("pdfDetailsTable");
  tbody.innerHTML = "";
  
  const fields = [
    {label: "आवेदन क्रमांक", value: appNo},
    {label: "आवेदक का नाम", value: item.applicantName || item.studentName || "—"},
    {label: "पिता का नाम", value: item.fatherName || "—"},
    {label: "लिंग", value: item.gender === "male" ? "पुरुष" : item.gender === "female" ? "महिला" : item.gender || "—"},
    {label: "जन्म तिथि", value: formatDate(item.dob)},
    {label: "मोबाइल नंबर", value: item.phone || item.mobile || "—"},
    {label: "ईमेल", value: item.email || "—"},
    {label: "जिला", value: item.district || "—"},
    {label: "तहसील", value: item.tehsil || "—"},
    {label: "ग्राम/वार्ड", value: item.village || item.address || "—"},
    {label: "सेवा प्रकार", value: getServiceName(item)},
    {label: "समग्र ID", value: item.samagraId || item.memberId || "—"},
    {label: "आवेदन तिथि", value: formatDate(item.createdAt)},
    {label: "स्थिति", value: item.status === "complete" ? "पूर्ण" : item.status === "reject" ? "अस्वीकृत" : "लंबित"},
    {label: "टिप्पणी", value: item.comments || item.remarks || "कोई टिप्पणी नहीं"}
  ];
  
  fields.forEach(f => {
    tbody.innerHTML += `
      <tr>
        <td style="font-weight:600; background:#f8fafc;">${f.label}</td>
        <td>${f.value}</td>
      </tr>`;
  });
}

window.downloadPDF = async () => {
  if (!currentApp) {
    alert("कृपया पहले एक आवेदन चुनें");
    return;
  }
  
  const { item, appNo } = currentApp;
  const pdfContent = document.getElementById("pdfContent");
  const qrContainer = document.getElementById("pdfQR");
  
  try {
    // Create QR code
    const qrText = `AllInOne MP | ${appNo} | ${item.applicantName || item.studentName || "—"} | ${getServiceName(item)}`;
    const qrDataUrl = await createQRImageDataUrl(qrText, 110);
    
    qrContainer.innerHTML = qrDataUrl
      ? `<img src="${qrDataUrl}" alt="QR Code">`
      : `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#64748b;">
           QR कोड उपलब्ध नहीं
         </div>`;
    
    preparePDF(item, appNo);
    
    // Wait for fonts to load
    await document.fonts.ready;
    
    const opt = {
      margin: 0,
      filename: `AllInOne_${appNo}.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: {
        scale: 3,
        useCORS: true,
        letterRendering: true,
        logging: false,
        backgroundColor: '#ffffff',
        width: 794,
        height: 1123,
        windowWidth: 794,
        windowHeight: 1123
      },
      jsPDF: {
        unit: 'mm',
        format: 'a4',
        orientation: 'portrait',
        compress: true
      }
    };
    
    // Temporarily move PDF content to visible position
    const originalPosition = pdfContent.style.position;
    const originalTop = pdfContent.style.top;
    const originalLeft = pdfContent.style.left;
    
    pdfContent.style.position = 'absolute';
    pdfContent.style.top = '0';
    pdfContent.style.left = '0';
    pdfContent.style.zIndex = '99999';
    document.body.appendChild(pdfContent);
    
    // Generate PDF
    await html2pdf().set(opt).from(pdfContent).save();
    
    alert("PDF डाउनलोड हो गया ✓");
    
    // Restore original position
    pdfContent.style.position = originalPosition;
    pdfContent.style.top = originalTop;
    pdfContent.style.left = originalLeft;
    pdfContent.style.zIndex = '-9999';
    document.getElementById('pdfContent').appendChild(pdfContent);
    
  } catch (err) {
    console.error("PDF बनाने में त्रुटि:", err);
    alert("PDF बनाने में त्रुटि हुई");
  }
};

window.printApplication = () => {
  if (!currentApp) {
    alert("कृपया पहले एक आवेदन चुनें");
    return;
  }
  
  const printWindow = window.open('', '_blank');
  const { item, appNo } = currentApp;
  
  printWindow.document.write(`
    <html>
      <head>
        <title>आवेदन विवरण - ${appNo}</title>
        <style>
          body { font-family: 'Noto Sans Devanagari', sans-serif; padding: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .app-no { font-size: 18px; font-weight: bold; color: #1e3a8a; margin: 10px 0; }
          .section { margin-bottom: 20px; }
          .section h3 { color: #1e3a8a; border-bottom: 2px solid #1e3a8a; padding-bottom: 5px; }
          table { width: 100%; border-collapse: collapse; margin: 10px 0; }
          td { padding: 8px; border: 1px solid #ddd; }
          .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #666; }
          @media print { .no-print { display: none; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>AllInOne MP पोर्टल - आवेदन विवरण</h2>
          <div class="app-no">आवेदन क्रमांक: ${appNo}</div>
          <p>मध्य प्रदेश सरकार</p>
        </div>
        
        <div class="section">
          <h3>आवेदक विवरण</h3>
          <table>
            <tr><td>नाम:</td><td>${item.applicantName || item.studentName || "—"}</td></tr>
            <tr><td>पिता का नाम:</td><td>${item.fatherName || "—"}</td></tr>
            <tr><td>लिंग:</td><td>${item.gender === "male" ? "पुरुष" : item.gender === "female" ? "महिला" : item.gender || "—"}</td></tr>
            <tr><td>मोबाइल:</td><td>${item.phone || item.mobile || "—"}</td></tr>
          </table>
        </div>
        
        <div class="section">
          <h3>आवेदन विवरण</h3>
          <table>
            <tr><td>सेवा प्रकार:</td><td>${getServiceName(item)}</td></tr>
            <tr><td>आवेदन तिथि:</td><td>${formatDate(item.createdAt)}</td></tr>
            <tr><td>स्थिति:</td><td>${item.status === "complete" ? "पूर्ण" : item.status === "reject" ? "अस्वीकृत" : "लंबित"}</td></tr>
          </table>
        </div>
        
        <div class="footer">
          <p>यह दस्तावेज़ AllInOne MP पोर्टल द्वारा जनरेट किया गया है</p>
          <p>प्रिंट तिथि: ${new Date().toLocaleDateString("hi-IN")}</p>
        </div>
        
        <div class="no-print">
          <button onclick="window.print()" style="padding:10px 20px;background:#1e3a8a;color:white;border:none;cursor:pointer;">
            प्रिंट करें
          </button>
          <button onclick="window.close()" style="padding:10px 20px;background:#666;color:white;border:none;cursor:pointer;">
            बंद करें
          </button>
        </div>
        
        <script>
          window.onload = function() {
            window.print();
          }
        </script>
      </body>
    </html>
  `);
  
  printWindow.document.close();
};

// =============================================
// Export CSV
// =============================================
function exportToCSV() {
  if (filteredApplications.length === 0) {
    alert("निर्यात करने के लिए कोई डेटा नहीं है");
    return;
  }
  
  const headers = [
    'आवेदन ID',
    'नाम',
    'पिता का नाम',
    'सेवा प्रकार',
    'समग्र ID',
    'मोबाइल',
    'जिला',
    'आवेदन तिथि',
    'स्थिति'
  ];
  
  const csvData = filteredApplications.map(app => [
    `AIO-${app.id.substring(0,8).toUpperCase()}`,
    app.applicantName || app.studentName || '',
    app.fatherName || '',
    getServiceName(app),
    app.samagraId || app.memberId || '',
    app.phone || app.mobile || '',
    app.district || '',
    formatDate(app.createdAt),
    app.status === 'complete' ? 'पूर्ण' : app.status === 'reject' ? 'अस्वीकृत' : 'लंबित'
  ]);
  
  const csvContent = [
    headers.join(','),
    ...csvData.map(row => row.map(cell => `"${cell}"`).join(','))
  ].join('\n');
  
  const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
  const link = document.createElement('a');
  const url = URL.createObjectURL(blob);
  
  link.setAttribute('href', url);
  link.setAttribute('download', `AllInOne_Applications_${new Date().toISOString().split('T')[0]}.csv`);
  link.style.visibility = 'hidden';
  
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  
  alert("CSV फ़ाइल निर्यात हो गई");
}

// =============================================
// Logout
// =============================================
window.logout = () => {
  if (confirm("क्या आप लॉगआउट करना चाहते हैं?")) {
    signOut(auth).then(() => {
      window.location.href = "login.html";
    }).catch(err => {
      console.error("लॉगआउट में त्रुटि:", err);
      alert("लॉगआउट में त्रुटि हुई");
    });
  }
};
</script>
</body>
</html>
