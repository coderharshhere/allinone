<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AllInOne MP – Advanced Admin Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* [यहाँ पूरा CSS कोड वैसे ही रहेगा जैसे पिछले कोड में था - space बचाने के लिए यहाँ नहीं दिखा रहा] */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700;800&display=swap');
:root { /* ... */ }
/* ... बाकी सारा CSS ... */
</style>
</head>
<body class="bg-gray-50 min-h-screen">
<!-- LOADING SCREEN - Updated Message -->
<div id="loadingScreen" class="loading-screen">
<div class="loading-spinner"></div>
<h2 class="text-2xl font-bold text-gray-800 mt-4">AllInOne MP प्रणाली</h2>
<p class="mt-3 text-gray-600 font-medium text-lg">डेमो मोड में लोड हो रहा है...</p>
<p id="loadingStatus" class="mt-3 text-sm text-green-600 flex items-center gap-2">
<i class="fas fa-check-circle"></i> <span>डेमो डेटा तैयार हो रहा है...</span>
</p>
<div class="mt-6 flex gap-3">
<div class="w-40 bg-gray-200 rounded-full overflow-hidden">
<div id="loadingProgress" class="h-2 bg-blue-600" style="width: 15%"></div>
</div>
<span id="progressText" class="text-sm font-medium text-gray-700">15%</span>
</div>
</div>

<!-- [बाकी सारा HTML कोड वैसे ही रहेगा - SIDEBAR, TOP BAR, MAIN CONTENT आदि] -->
<!-- ... पूरा HTML structure ... -->

<!-- JAVASCRIPT - COMPLETELY REWRITTEN FOR DEMO MODE -->
<script>
// ========================================
// DEMO MODE - NO FIREBASE REQUIRED
// ========================================
document.addEventListener('DOMContentLoaded', function() {
    // Initialize date
    const today = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
    document.getElementById('currentDate').textContent = today.toLocaleDateString('hi-IN', options);
    
    // Set admin avatar based on name
    const adminName = 'प्रशासक';
    document.getElementById('topBarAvatar').textContent = adminName.charAt(0);
    document.getElementById('adminName').textContent = adminName;
    document.getElementById('sidebarAdminName').textContent = adminName;
    document.getElementById('welcomeAdminName').textContent = adminName;
    document.getElementById('profileAvatar').textContent = adminName.charAt(0);
    document.getElementById('profileName').textContent = adminName;
    document.getElementById('profileEmail').textContent = 'admin@allinonemp.gov.in';
    
    // Update Firebase status to Demo Mode
    const statusEl = document.getElementById('firebaseStatus');
    if (statusEl) {
        statusEl.textContent = "डेमो मोड";
        statusEl.className = "font-bold text-blue-600";
    }
    
    // Simulate loading completion
    let progress = 15;
    const interval = setInterval(() => {
        progress += Math.floor(Math.random() * 15) + 5;
        if (progress > 95) progress = 95;
        document.getElementById('loadingProgress').style.width = `${progress}%`;
        document.getElementById('progressText').textContent = `${progress}%`;
        
        if (progress > 90) {
            clearInterval(interval);
            setTimeout(() => {
                document.getElementById('loadingProgress').style.width = "100%";
                document.getElementById('progressText').textContent = "100%";
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                        document.body.style.overflow = 'auto';
                        
                        // Initialize everything after loading
                        initCharts();
                        renderUsers();
                        renderApplications();
                        renderDashboardStats();
                        setupEventListeners();
                    }, 300);
                }, 300);
            }, 500);
        }
    }, 400);
});

// Mock Data
const mockApplications = [
    { id: 'app1', applicantName: 'राजेश कुमार', fatherName: 'श्यामशरण यादव', mobileNumber: '9876543210', email: 'rajesh@example.com', serviceType: 'samagra', district: 'bhopal', status: 'pending', address: 'गली नंबर 5, शास्त्री नगर, भोपाल', pincode: '462001', createdAt: new Date(Date.now() - 86400000) },
    { id: 'app2', applicantName: 'सीता वर्मा', fatherName: 'रामशरण वर्मा', mobileNumber: '9876543211', email: 'sita@example.com', serviceType: 'mpbhoj', district: 'indore', status: 'complete', address: 'महालगंज, इंदौर', pincode: '452001', createdAt: new Date(Date.now() - 172800000) },
    { id: 'app3', applicantName: 'मोहन लाल', fatherName: 'किशन लाल', mobileNumber: '9876543212', email: 'mohan@example.com', serviceType: 'scholarship', district: 'jabalpur', status: 'processing', address: 'रामपुरी, जबलपुर', pincode: '482001', createdAt: new Date(Date.now() - 259200000) },
    { id: 'app4', applicantName: 'कमलेश यादव', fatherName: 'हरिशंकर यादव', mobileNumber: '9876543213', email: 'kamlesh@example.com', serviceType: 'pension', district: 'gwalior', status: 'reject', address: 'लश्कर, ग्वालियर', pincode: '474001', createdAt: new Date(Date.now() - 345600000) },
    { id: 'app5', applicantName: 'सोनू शर्मा', fatherName: 'राजेश शर्मा', mobileNumber: '9876543214', email: 'sonu@example.com', serviceType: 'housing', district: 'ujjain', status: 'complete', address: 'देवस्थान, उज्जैन', pincode: '456001', createdAt: new Date(Date.now() - 432000000) },
    { id: 'app6', applicantName: 'अनिता देवी', fatherName: 'सुरेश देवी', mobileNumber: '9876543215', email: 'anita@example.com', serviceType: 'samagra', district: 'sagar', status: 'pending', address: 'सागर सिटी', pincode: '470001', createdAt: new Date(Date.now() - 518400000) },
    { id: 'app7', applicantName: 'विकास जैन', fatherName: 'महेश जैन', mobileNumber: '9876543216', email: 'vikas@example.com', serviceType: 'mpbhoj', district: 'ratlam', status: 'pending', address: 'रतलाम सेंट्रल', pincode: '457001', createdAt: new Date(Date.now() - 604800000) },
    { id: 'app8', applicantName: 'प्रिया सिंह', fatherName: 'रवि सिंह', mobileNumber: '9876543217', email: 'priya@example.com', serviceType: 'scholarship', district: 'satna', status: 'processing', address: 'सतना मेन रोड', pincode: '485001', createdAt: new Date(Date.now() - 691200000) }
];

const mockUsers = [
    { id: 1, name: 'प्रशासक', email: 'admin@allinonemp.gov.in', role: 'सुपर एडमिन', status: 'online', lastLogin: '2 मिनट पहले', district: 'भोपाल' },
    { id: 2, name: 'राजेश शर्मा', email: 'rajesh@mp.gov.in', role: 'अधिकारी', status: 'online', lastLogin: '5 मिनट पहले', district: 'इंदौर' },
    { id: 3, name: 'सीता वर्मा', email: 'sita@mp.gov.in', role: 'अधिकारी', status: 'offline', lastLogin: '2 घंटे पहले', district: 'जबलपुर' },
    { id: 4, name: 'मोहन लाल', email: 'mohan@mp.gov.in', role: 'दर्शक', status: 'offline', lastLogin: '1 दिन पहले', district: 'ग्वालियर' },
    { id: 5, name: 'कमलेश यादव', email: 'kamlesh@mp.gov.in', role: 'डेटा एंट्री', status: 'online', lastLogin: '15 मिनट पहले', district: 'उज्जैन' }
];

// Render Functions
function renderDashboardStats() {
    const total = mockApplications.length;
    const pending = mockApplications.filter(a => a.status === 'pending').length;
    const complete = mockApplications.filter(a => a.status === 'complete').length;
    const rejected = mockApplications.filter(a => a.status === 'reject').length;
    const processing = mockApplications.filter(a => a.status === 'processing').length;
    
    document.getElementById('statTotal').textContent = total.toLocaleString();
    document.getElementById('statPending').textContent = pending.toLocaleString();
    document.getElementById('statComplete').textContent = complete.toLocaleString();
    document.getElementById('statRejected').textContent = rejected.toLocaleString();
    document.getElementById('statPendingCount').textContent = pending;
    document.getElementById('statCompleteRate').textContent = ((complete / total) * 100).toFixed(1) + '%';
    document.getElementById('statRejectedRate').textContent = ((rejected / total) * 100).toFixed(1) + '%';
    document.getElementById('statTotalGrowth').textContent = '12.5%';
    
    // Update notification badge
    const badge = document.querySelector('.notification-badge');
    if (badge) badge.textContent = pending;
}

function renderApplications() {
    const tbody = document.getElementById('dataTable');
    const applicationsTbody = document.getElementById('applicationsTableBody');
    
    // Dashboard table (top 5)
    let dashboardHtml = '';
    mockApplications.slice(0, 5).forEach((item) => {
        const appNo = `AIO-MP-${item.id.toUpperCase()}`;
        const statusClass = getStatusClass(item.status);
        const statusText = getStatusText(item.status);
        const serviceText = getServiceName(item.serviceType);
        
        dashboardHtml += `
        <tr class="table-row hover:bg-blue-50/50 transition-all">
            <td class="font-mono font-bold text-blue-800">${appNo}</td>
            <td class="font-bold text-gray-800">${item.applicantName}</td>
            <td><span class="service-badge">${serviceText}</span></td>
            <td class="hidden md:table-cell font-medium">${item.mobileNumber}</td>
            <td class="hidden md:table-cell text-gray-600">${formatDate(item.createdAt)}</td>
            <td>
                <span class="status-badge ${statusClass} px-3 py-1.5">
                    <i class="fas ${getStatusIcon(item.status)} mr-1.5"></i>
                    ${statusText}
                </span>
            </td>
            <td>
                <div class="flex items-center gap-2">
                    <button onclick="viewDetails('${item.id}')" class="action-btn action-view" title="विवरण देखें">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button onclick="openEditModal('${item.id}')" class="action-btn action-edit" title="संपादित करें">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="deleteApplication('${item.id}')" class="action-btn action-delete" title="हटाएं">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </td>
        </tr>
        `;
    });
    tbody.innerHTML = dashboardHtml;
    document.getElementById('totalRecords').textContent = mockApplications.length;
    
    // Applications management table
    let applicationsHtml = '';
    mockApplications.forEach((item) => {
        const appNo = `AIO-MP-${item.id.toUpperCase()}`;
        const statusClass = getStatusClass(item.status);
        const statusText = getStatusText(item.status);
        const serviceText = getServiceName(item.serviceType);
        const districtText = getDistrictName(item.district);
        
        applicationsHtml += `
        <tr class="table-row hover:bg-blue-50/50 transition-all">
            <td><input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600 rounded application-checkbox" value="${item.id}"></td>
            <td class="font-mono font-bold text-blue-800">${appNo}</td>
            <td class="font-bold text-gray-800">${item.applicantName}</td>
            <td class="text-gray-700">${item.fatherName}</td>
            <td><span class="service-badge">${serviceText}</span></td>
            <td class="hidden md:table-cell text-gray-700 font-medium">${districtText}</td>
            <td>
                <select class="status-select ${statusClass}" onchange="quickStatusChange('${item.id}', this.value)">
                    <option value="pending" ${item.status === 'pending' ? 'selected' : ''}>लंबित</option>
                    <option value="processing" ${item.status === 'processing' ? 'selected' : ''}>प्रोसेसिंग</option>
                    <option value="complete" ${item.status === 'complete' ? 'selected' : ''}>पूर्ण</option>
                    <option value="reject" ${item.status === 'reject' ? 'selected' : ''}>अस्वीकृत</option>
                </select>
            </td>
            <td class="hidden md:table-cell text-gray-600">${formatDate(item.createdAt)}</td>
            <td>
                <div class="flex items-center gap-2">
                    <button onclick="viewDetails('${item.id}')" class="action-btn action-view" title="विवरण देखें">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button onclick="openEditModal('${item.id}')" class="action-btn action-edit" title="संपादित करें">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </td>
        </tr>
        `;
    });
    applicationsTbody.innerHTML = applicationsHtml;
    document.getElementById('applicationsTotal').textContent = mockApplications.length;
    document.getElementById('applicationsShowing').textContent = mockApplications.length;
}

function renderUsers() {
    const tbody = document.getElementById('usersTableBody');
    let html = '';
    
    mockUsers.forEach(user => {
        html += `
        <tr class="table-row">
            <td>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold">
                        ${user.name.charAt(0)}
                    </div>
                    <span class="user-status ${user.status}"></span>
                    <div>
                        <div class="font-bold text-gray-800">${user.name}</div>
                        <div class="text-xs text-gray-500">${user.district}</div>
                    </div>
                </div>
            </td>
            <td class="text-gray-600">${user.email}</td>
            <td><span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${user.role}</span></td>
            <td><span class="${user.status === 'online' ? 'text-green-600' : 'text-gray-500'} text-sm font-medium capitalize">${user.status === 'online' ? 'ऑनलाइन' : 'ऑफलाइन'}</span></td>
            <td class="text-gray-600 text-sm">${user.lastLogin}</td>
            <td>
                <div class="flex gap-2">
                    <button class="action-btn action-edit" onclick="editUser('${user.id}')"><i class="fas fa-edit"></i></button>
                    <button class="action-btn action-delete" onclick="deleteUser('${user.id}')"><i class="fas fa-trash"></i></button>
                </div>
            </td>
        </tr>
        `;
    });
    
    tbody.innerHTML = html;
    document.getElementById('activeUsersCount').textContent = mockUsers.filter(u => u.status === 'online').length;
    document.getElementById('totalOfficers').textContent = mockUsers.filter(u => u.role.includes('अधिकारी') || u.role.includes('प्रशासक')).length;
}

// Chart Initialization
function initCharts() {
    // Applications Chart
    const ctx1 = document.getElementById('applicationsChart').getContext('2d');
    new Chart(ctx1, {
        type: 'line',
        data: {
            labels: ['जन', 'फर', 'मार्च', 'अप्रै', 'मई', 'जून', 'जुला', 'अग', 'सित', 'अक्टू', 'नवं', 'दिसं'],
            datasets: [{
                label: 'आवेदन',
                data: [65, 59, 80, 81, 56, 55, 40, 78, 86, 92, 75, 88],
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                borderWidth: 3,
                pointBackgroundColor: '#ffffff',
                pointBorderColor: '#3b82f6',
                pointBorderWidth: 3,
                pointRadius: 5,
                pointHoverRadius: 7,
                fill: true,
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: 'मासिक आवेदन रुझान (2024)',
                    font: { size: 16, weight: 'bold' },
                    color: '#1e293b'
                },
                legend: { display: false }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { color: 'rgba(0, 0, 0, 0.05)' },
                    ticks: { color: '#64748b' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#64748b' }
                }
            }
        }
    });
    
    // Status Chart
    const ctx2 = document.getElementById('statusChart').getContext('2d');
    new Chart(ctx2, {
        type: 'doughnut',
        data: {
            labels: ['पूर्ण', 'लंबित', 'प्रोसेसिंग', 'अस्वीकृत'],
            datasets: [{
                data: [35, 40, 15, 10],
                backgroundColor: ['#22c55e', '#f59e0b', '#3b82f6', '#ef4444'],
                borderWidth: 0,
                hoverOffset: 20
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: 'आवेदन स्थिति वितरण',
                    font: { size: 16, weight: 'bold' },
                    color: '#1e293b'
                },
                legend: {
                    position: 'bottom',
                    labels: { padding: 20, color: '#475569', font: { size: 13 } }
                }
            },
            cutout: '65%'
        }
    });
}

// Event Listeners Setup
function setupEventListeners() {
    // Notification dropdown toggle
    const notifBtn = document.getElementById('notificationBtn');
    const notifDropdown = document.getElementById('notificationDropdown');
    
    if (notifBtn && notifDropdown) {
        notifBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            notifDropdown.classList.toggle('hidden');
        });
        
        document.addEventListener('click', function(e) {
            if (!notifDropdown.contains(e.target) && !notifBtn.contains(e.target)) {
                notifDropdown.classList.add('hidden');
            }
        });
    }
    
    // Search functionality
    const searchInput = document.getElementById('searchApplications');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            // In real app, filter applications here
            console.log('Searching for:', query);
        });
    }
    
    // Status filter
    const statusFilter = document.getElementById('statusFilter');
    if (statusFilter) {
        statusFilter.addEventListener('change', function() {
            const status = this.value;
            console.log('Filtering by status:', status);
            // In real app, filter applications here
        });
    }
}

// Helper Functions
function getStatusClass(status) {
    return status === 'complete' ? 'status-complete' :
           status === 'reject' ? 'status-reject' :
           status === 'processing' ? 'status-processing' : 'status-pending';
}

function getStatusText(status) {
    return status === 'complete' ? 'पूर्ण' :
           status === 'reject' ? 'अस्वीकृत' :
           status === 'processing' ? 'प्रोसेसिंग' : 'लंबित';
}

function getStatusIcon(status) {
    return status === 'complete' ? 'fa-check-circle' :
           status === 'reject' ? 'fa-times-circle' :
           status === 'processing' ? 'fa-cog' : 'fa-clock';
}

function formatDate(date) {
    if (!date) return '-';
    if (typeof date === 'string') date = new Date(date);
    return date.toLocaleDateString('hi-IN', {
        day: '2-digit',
        month: 'short',
        year: 'numeric'
    });
}

function getServiceName(type) {
    const services = {
        'samagra': 'समग्र आईडी',
        'mpbhoj': 'एमपी भोज योजना',
        'scholarship': 'छात्रवृत्ति',
        'pension': 'पेंशन',
        'housing': 'आवास योजना'
    };
    return services[type] || 'अन्य सेवा';
}

function getDistrictName(district) {
    const districts = {
        'bhopal': 'भोपाल',
        'indore': 'इंदौर',
        'jabalpur': 'जबलपुर',
        'gwalior': 'ग्वालियर',
        'ujjain': 'उज्जैन',
        'sagar': 'सागर',
        'ratlam': 'रतलाम',
        'satna': 'सतना'
    };
    return districts[district] || district;
}

// UI Functions (All working in Demo Mode)
function showSection(sectionId) {
    document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('onclick')?.includes(sectionId)) {
            item.classList.add('active');
        }
    });
    
    if (sectionId === 'users') {
        renderUsers();
    } else if (sectionId === 'applications') {
        renderApplications();
    }
    
    if (window.innerWidth < 768) {
        const sidebar = document.getElementById('sidebar');
        if (!sidebar.classList.contains('collapsed')) {
            toggleSidebar();
        }
    }
    
    window.scrollTo(0, 0);
}

function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');
    const topBar = document.getElementById('topBar');
    sidebar.classList.toggle('collapsed');
    mainContent.classList.toggle('sidebar-collapsed');
    topBar.classList.toggle('sidebar-collapsed');
    
    if (window.innerWidth < 768) {
        sidebar.classList.toggle('active');
    }
}

function viewDetails(id) {
    const item = mockApplications.find(a => a.id === id);
    if (!item) return;
    
    // Populate modal with item data
    document.getElementById('receiptAppNumber').textContent = `AIO-MP-${item.id.toUpperCase()}`;
    document.getElementById('receiptDate').textContent = formatDate(new Date());
    document.getElementById('lastUpdated').textContent = formatDate(item.createdAt);
    
    const statusClass = getStatusClass(item.status);
    const statusText = getStatusText(item.status);
    const statusBadge = document.getElementById('receiptStatusBadge');
    statusBadge.className = `status-badge ${statusClass} text-base px-5 py-2.5 font-bold`;
    statusBadge.innerHTML = `<i class="fas ${getStatusIcon(item.status)} mr-2"></i>${statusText}`;
    
    // Generate QR Code
    const qrContainer = document.getElementById('qrCode');
    qrContainer.innerHTML = '';
    new QRCode(qrContainer, {
        text: JSON.stringify({
            id: item.id,
            appNo: `AIO-MP-${item.id.toUpperCase()}`,
            name: item.applicantName,
            service: item.serviceType,
            status: item.status
        }),
        width: 140,
        height: 140,
        colorDark: "#1e3a8a",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
    });
    
    // Populate applicant details
    const applicantFields = [
        { label: 'पूरा नाम', value: item.applicantName },
        { label: 'पिता/पति का नाम', value: item.fatherName },
        { label: 'मोबाइल नंबर', value: item.mobileNumber },
        { label: 'ईमेल आईडी', value: item.email || '-' },
        { label: 'लिंग', value: 'पुरुष' },
        { label: 'जन्म तिथि', value: '01 जनवरी, 1990' }
    ];
    
    let applicantHtml = '';
    applicantFields.forEach(field => {
        applicantHtml += `
        <div class="detail-row">
            <div class="detail-label">${field.label}</div>
            <div class="detail-value">${field.value}</div>
        </div>
        `;
    });
    document.getElementById('applicantDetails').innerHTML = applicantHtml;
    
    // Populate application details
    const applicationFields = [
        { label: 'सेवा प्रकार', value: getServiceName(item.serviceType) },
        { label: 'आवेदन तिथि', value: formatDate(item.createdAt) },
        { label: 'जिला', value: getDistrictName(item.district) },
        { label: 'पिन कोड', value: item.pincode },
        { label: 'पता', value: item.address }
    ];
    
    let applicationHtml = '';
    applicationFields.forEach(field => {
        applicationHtml += `
        <div class="detail-row">
            <div class="detail-label">${field.label}</div>
            <div class="detail-value">${field.value}</div>
        </div>
        `;
    });
    document.getElementById('applicationDetails').innerHTML = applicationHtml;
    
    // Show documents
    document.getElementById('documentsSection').innerHTML = `
    <div class="document-item">
        <div class="document-icon"><i class="fas fa-id-card"></i></div>
        <span class="document-name">आधार कार्ड</span>
        <a href="#" class="document-link">देखें</a>
    </div>
    <div class="document-item">
        <div class="document-icon"><i class="fas fa-file-alt"></i></div>
        <span class="document-name">पता प्रमाण</span>
        <a href="#" class="document-link">देखें</a>
    </div>
    <div class="document-item">
        <div class="document-icon"><i class="fas fa-image"></i></div>
        <span class="document-name">फोटोग्राफ</span>
        <a href="#" class="document-link">देखें</a>
    </div>
    `;
    
    document.getElementById('detailModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('detailModal').classList.remove('active');
    document.body.style.overflow = 'auto';
}

function openEditModal(id) {
    const item = mockApplications.find(a => a.id === id);
    if (!item) return;
    
    // In real app, populate edit form
    alert(`आवेदन संपादित करें: ${item.applicantName}`);
}

function deleteApplication(id) {
    if (confirm('क्या आप वाकई इस आवेदन को हटाना चाहते हैं?')) {
        // In real app, delete from database
        alert('आवेदन सफलतापूर्वक हटा दिया गया!');
        renderApplications();
        renderDashboardStats();
    }
}

function quickStatusChange(id, newStatus) {
    // In real app, update status in database
    const statusText = getStatusText(newStatus);
    alert(`स्थिति "${statusText}" में बदल दी गई!`);
    renderApplications();
    renderDashboardStats();
}

function updateApplicationStatus(status) {
    const statusText = getStatusText(status);
    alert(`आवेदन स्थिति "${statusText}" में बदल दी गई!`);
    closeModal();
    renderApplications();
    renderDashboardStats();
}

// User Management Functions
function openAddUserModal() {
    document.getElementById('addUserModal').classList.add('active');
}

function closeAddUserModal() {
    document.getElementById('addUserModal').classList.remove('active');
}

document.getElementById('addUserForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const userName = document.getElementById('newUserName').value;
    alert(`नया उपयोगकर्ता "${userName}" सफलतापूर्वक जोड़ा गया!`);
    closeAddUserModal();
    this.reset();
    renderUsers();
});

function editUser(id) {
    const user = mockUsers.find(u => u.id == id);
    if (user) {
        alert(`उपयोगकर्ता संपादित करें: ${user.name}`);
    }
}

function deleteUser(id) {
    const user = mockUsers.find(u => u.id == id);
    if (user && confirm(`क्या आप वाकई "${user.name}" को हटाना चाहते हैं?`)) {
        alert('उपयोगकर्ता सफलतापूर्वक हटा दिया गया!');
        renderUsers();
    }
}

// Profile Functions
function openEditProfileModal() {
    document.getElementById('editProfileModal').classList.add('active');
}

function closeEditProfileModal() {
    document.getElementById('editProfileModal').classList.remove('active');
}

document.getElementById('editProfileForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const newName = document.getElementById('editProfileName').value;
    document.getElementById('adminName').textContent = newName;
    document.getElementById('sidebarAdminName').textContent = newName;
    document.getElementById('profileName').textContent = newName;
    document.getElementById('welcomeAdminName').textContent = newName;
    alert('प्रोफाइल सफलतापूर्वक अपडेट हो गई!');
    closeEditProfileModal();
});

// Settings Functions
function saveSettings() {
    alert('सेटिंग्स सफलतापूर्वक सहेजी गईं!');
}

function clearAllData() {
    if (confirm('चेतावनी: यह सभी आवेदन डेटा हमेशा के लिए हटा देगा। क्या आप सुनिश्चित हैं?')) {
        alert('डेटा सफलतापूर्वक साफ़ कर दिया गया! (डेमो मोड में)');
    }
}

// Export Functions
function exportToCSV() {
    alert('आवेदन डेटा CSV में निर्यात हो गया! (डेमो मोड)');
}

function exportToPDF() {
    alert('PDF रिपोर्ट तैयार हो रही है... (डेमो मोड)');
}

function downloadPDF() {
    alert('PDF रसीद डाउनलोड हो गई! (डेमो मोड)');
}

function printReceipt() {
    alert('प्रिंट फंक्शन डेमो मोड में काम नहीं करता। वास्तविक ऐप में यह प्रिंट डायलॉग खोलेगा।');
}

// Bulk Actions
function toggleSelectAll() {
    const checkbox = document.getElementById('selectAllCheckbox');
    const checkboxes = document.querySelectorAll('.application-checkbox');
    checkboxes.forEach(cb => cb.checked = checkbox.checked);
    updateBulkActionBar();
}

function updateBulkActionBar() {
    const checkboxes = document.querySelectorAll('.application-checkbox:checked');
    const count = checkboxes.length;
    const bar = document.getElementById('bulkActionBar');
    
    if (count > 0) {
        bar.classList.add('active');
        document.getElementById('selectedCount').textContent = count;
    } else {
        bar.classList.remove('active');
    }
}

function clearSelection() {
    document.getElementById('selectAllCheckbox').checked = false;
    document.querySelectorAll('.application-checkbox').forEach(cb => cb.checked = false);
    document.getElementById('bulkActionBar').classList.remove('active');
    document.getElementById('selectedCount').textContent = '0';
}

function bulkStatusUpdate(status) {
    const checkboxes = document.querySelectorAll('.application-checkbox:checked');
    const count = checkboxes.length;
    if (count === 0) {
        alert('कृपया कम से कम एक आवेदन चुनें!');
        return;
    }
    
    const statusText = getStatusText(status);
    alert(`${count} आवेदनों की स्थिति "${statusText}" में बदल दी गई!`);
    clearSelection();
    renderApplications();
    renderDashboardStats();
}

function bulkExport() {
    const checkboxes = document.querySelectorAll('.application-checkbox:checked');
    const count = checkboxes.length || mockApplications.length;
    alert(`${count} आवेदनों का CSV निर्यात हो रहा है... (डेमो मोड)`);
}

// Other Functions
function refreshData() {
    document.getElementById('loadingScreen').style.display = 'flex';
    document.getElementById('loadingScreen').style.opacity = '1';
    document.body.style.overflow = 'hidden';
    
    setTimeout(() => {
        document.getElementById('loadingProgress').style.width = "100%";
        document.getElementById('progressText').textContent = "100%";
        setTimeout(() => {
            document.getElementById('loadingScreen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                document.body.style.overflow = 'auto';
                alert('डेटा सफलतापूर्वक रीफ्रेश हो गया! (डेमो मोड)');
                renderApplications();
                renderDashboardStats();
            }, 300);
        }, 300);
    }, 800);
}

function logout() {
    if (confirm('क्या आप प्रणाली से बाहर निकलना चाहते हैं?')) {
        document.getElementById('loadingScreen').style.display = 'flex';
        document.getElementById('loadingScreen').style.opacity = '1';
        document.body.style.overflow = 'hidden';
        
        setTimeout(() => {
            alert('आप सफलतापूर्वक लॉगआउट हो गए हैं! (डेमो मोड)');
            // In real app: redirect to login page
        }, 1000);
    }
}

function applyFilters() {
    const status = document.getElementById('statusFilter').value;
    const search = document.getElementById('searchApplications').value;
    alert(`फ़िल्टर लागू किए गए:\nस्थिति: ${status || 'सभी'}\nखोज: ${search || 'कोई नहीं'}`);
}

function applyAdvancedFilters() {
    const from = document.getElementById('dateFrom').value;
    const to = document.getElementById('dateTo').value;
    const district = document.getElementById('districtFilter').value;
    alert(`उन्नत फ़िल्टर लागू किए गए:\nतिथि: ${from || 'सभी'} से ${to || 'सभी'}\nजिला: ${district || 'सभी'}`);
}
</script>
</body>
</html>

