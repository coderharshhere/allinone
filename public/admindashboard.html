<!DOCTYPE html>
<html lang="en">
<head>
┬а ┬а <meta charset="UTF-8">
┬а ┬а <meta name="viewport" content="width=device-width, initial-scale=1.0">
┬а ┬а <title>Super Admin Dashboard - All In One</title>
┬а ┬а┬а
┬а ┬а <!-- Tailwind CSS -->
┬а ┬а <script src="https://cdn.tailwindcss.com"></script>
┬а ┬а┬а
┬а ┬а <!-- Lucide Icons -->
┬а ┬а <script src="https://unpkg.com/lucide@latest"></script>
┬а ┬а┬а
┬а ┬а <!-- Font -->
┬а ┬а <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

┬а ┬а <style>
┬а ┬а ┬а ┬а body { font-family: 'Inter', sans-serif; }
┬а ┬а ┬а ┬а .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
┬а ┬а ┬а ┬а @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
┬а ┬а ┬а ┬а ::-webkit-scrollbar { width: 6px; height: 6px; }
┬а ┬а ┬а ┬а ::-webkit-scrollbar-track { background: #f1f1f1; }
┬а ┬а ┬а ┬а ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
┬а ┬а ┬а ┬а ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а /* Dashboard hidden by default for security */
┬а ┬а ┬а ┬а #dashboard-view { display: none; }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а /* Modal Styles */
┬а ┬а ┬а ┬а .modal { transition: opacity 0.25s ease; }
┬а ┬а ┬а ┬а body.modal-active { overflow-x: hidden; overflow-y: hidden !important; }
┬а ┬а </style>
</head>
<body class="bg-gray-50 text-gray-900 h-screen overflow-hidden">

┬а ┬а <!-- ================= SECURITY LOADER (Visible by default) ================= -->
┬а ┬а <div id="auth-loader" class="fixed inset-0 bg-white z-[100] flex flex-col items-center justify-center transition-opacity duration-500">
┬а ┬а ┬а ┬а <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
┬а ┬а ┬а ┬а <p class="mt-4 text-gray-500 font-medium">Verifying Access...</p>
┬а ┬а ┬а ┬а <p class="text-xs text-gray-400 mt-2">Redirecting if not logged in</p>
┬а ┬а </div>

┬а ┬а <!-- ================= DASHBOARD VIEW ================= -->
┬а ┬а <div id="dashboard-view" class="w-full h-full flex">
┬а ┬а ┬а ┬а <!-- Sidebar -->
┬а ┬а ┬а ┬а <aside id="sidebar" class="w-64 bg-slate-900 text-white transition-all duration-300 flex flex-col shadow-xl z-20">
┬а ┬а ┬а ┬а ┬а ┬а <div class="h-16 flex items-center justify-center border-b border-slate-800">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span id="brand-full" class="text-xl font-bold tracking-wider">SUPER<span class="text-blue-400">ADMIN</span></span>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <nav class="flex-1 py-6 space-y-1">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="switchTab('dashboard')" class="nav-item w-full flex items-center px-6 py-3 text-sm font-medium border-l-4 border-blue-500 bg-slate-800 text-blue-400" data-tab="dashboard">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="ml-3">Dashboard</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="switchTab('create-form')" class="nav-item w-full flex items-center px-6 py-3 text-sm font-medium border-l-4 border-transparent text-slate-400 hover:bg-slate-800 hover:text-white" data-tab="create-form">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="plus-circle" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="ml-3">Add Application</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="switchTab('admins')" class="nav-item w-full flex items-center px-6 py-3 text-sm font-medium border-l-4 border-transparent text-slate-400 hover:bg-slate-800 hover:text-white" data-tab="admins">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="shield" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="ml-3">Admin Details</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </nav>

┬а ┬а ┬а ┬а ┬а ┬а <div class="p-4 border-t border-slate-800 space-y-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-xs text-slate-500 text-center flex items-center justify-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а Connected to DB
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="logoutSystem()" class="flex items-center justify-center text-red-400 hover:text-red-300 transition-colors w-full text-sm font-medium py-2 rounded hover:bg-slate-800 cursor-pointer">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="log-out" class="w-4 h-4 mr-2"></i> Logout System
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </aside>

┬а ┬а ┬а ┬а <!-- Main Content -->
┬а ┬а ┬а ┬а <div class="flex-1 flex flex-col h-screen overflow-hidden">
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <!-- Header -->
┬а ┬а ┬а ┬а ┬а ┬а <header class="h-16 bg-white shadow-sm flex items-center justify-between px-6 z-10">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 id="page-title" class="text-xl font-semibold text-gray-800">Overview</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="openNotif()" class="relative">
┬а ┬а <i data-lucide="bell" class="w-5 h-5"></i>
</button>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center space-x-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center space-x-2 border-l pl-4 ml-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white text-xs font-bold">SA</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="hidden md:block text-sm">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p id="admin-email-display" class="font-medium text-gray-700">Loading...</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </header>

┬а ┬а ┬а ┬а ┬а ┬а <!-- Main Content Area -->
┬а ┬а ┬а ┬а ┬а ┬а <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6 relative">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Toast -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="toast" class="hidden absolute top-4 right-6 z-50 animate-fade-in">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 text-white bg-green-600">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="check-circle" class="w-4 h-4"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span id="toast-message" class="text-sm font-medium">Success</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Loading Overlay (Internal for forms) -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="loading" class="hidden absolute inset-0 bg-white/80 z-40 flex flex-col items-center justify-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="mt-4 text-gray-500 font-medium">Processing...</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- ADD ADMIN MODAL -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="add-admin-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto animate-fade-in">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="modal-content py-4 text-left px-6">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!--Title-->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center pb-3">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-2xl font-bold text-gray-800">Add New Admin</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="modal-close cursor-pointer z-50" onclick="toggleModal('add-admin-modal')">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="x" class="w-6 h-6 text-gray-500"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!--Body-->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <form id="new-admin-form" class="space-y-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="email" id="new-admin-email" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="admin@example.com" required>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="password" id="new-admin-password" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="******" required minlength="6">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <select id="new-admin-role" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="super_admin">Super Admin</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="admin">Admin</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="moderator">Moderator</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="mt-4 flex justify-end pt-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="button" class="px-4 bg-transparent p-3 rounded-lg text-indigo-500 hover:bg-gray-100 hover:text-indigo-400 mr-2" onclick="toggleModal('add-admin-modal')">Cancel</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="submit" class="modal-close px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400">Create Admin</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </form>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="max-w-7xl mx-auto">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- DASHBOARD VIEW -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="view-dashboard" class="space-y-6 animate-fade-in">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- ADD NOTIFICATION BOX -->
<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-5 max-w-xl">
┬а ┬а <h3 class="font-bold text-gray-800 mb-3 flex items-center">
┬а ┬а ┬а ┬а ЁЯФФ Publish Notification
┬а ┬а </h3>

┬а ┬а <input id="notif-title"
┬а ┬а ┬а ┬а type="text"
┬а ┬а ┬а ┬а placeholder="Notification Title"
┬а ┬а ┬а ┬а class="w-full border rounded-lg px-3 py-2 mb-3 focus:ring-2 focus:ring-blue-500 outline-none">

┬а ┬а <textarea id="notif-message"
┬а ┬а ┬а ┬а rows="3"
┬а ┬а ┬а ┬а placeholder="Notification Message"
┬а ┬а ┬а ┬а class="w-full border rounded-lg px-3 py-2 mb-3 focus:ring-2 focus:ring-blue-500 outline-none"></textarea>

┬а ┬а <button onclick="addNotification()"
┬а ┬а ┬а ┬а class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">
┬а ┬а ┬а ┬а Publish
┬а ┬а </button>
</div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Stats Grid -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Stats Cards (Same as before) -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500 text-xs font-medium uppercase">Total Forms</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 id="stat-total" class="text-2xl font-bold text-gray-800 mt-1">0</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 bg-blue-50 text-blue-600 rounded-lg"><i data-lucide="files" class="w-5 h-5"></i></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500 text-xs font-medium uppercase">Pending</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 id="stat-pending" class="text-2xl font-bold text-yellow-600 mt-1">0</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 bg-yellow-50 text-yellow-600 rounded-lg"><i data-lucide="clock" class="w-5 h-5"></i></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500 text-xs font-medium uppercase">Accepted</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 id="stat-accepted" class="text-2xl font-bold text-green-600 mt-1">0</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 bg-green-50 text-green-600 rounded-lg"><i data-lucide="check-circle" class="w-5 h-5"></i></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500 text-xs font-medium uppercase">Rejected</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 id="stat-rejected" class="text-2xl font-bold text-red-600 mt-1">0</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 bg-red-50 text-red-600 rounded-lg"><i data-lucide="x-circle" class="w-5 h-5"></i></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500 text-xs font-medium uppercase">Active Admins</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 id="stat-users" class="text-2xl font-bold text-purple-600 mt-1">0</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 bg-purple-50 text-purple-600 rounded-lg"><i data-lucide="users" class="w-5 h-5"></i></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Service Breakdown & Table -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Chart -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-5">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="font-bold text-gray-800 mb-4 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="bar-chart-2" class="w-4 h-4 mr-2 text-blue-500"></i> Form-wise Breakdown
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="service-breakdown" class="space-y-3">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-sm text-gray-400">Loading breakdown...</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- Table -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="font-semibold text-gray-800">Recent Applications</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs text-gray-500">Live Updates from Database</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="overflow-x-auto">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <table class="w-full text-left">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <thead class="bg-gray-50 text-gray-500 text-xs uppercase font-medium">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-3">Service / App No</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-3">Applicant</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-3">Status</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-3 text-right">Actions</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </thead>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tbody id="forms-table-body" class="divide-y divide-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr><td colspan="4" class="p-6 text-center text-gray-400">Loading data...</td></tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tbody>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </table>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- ADD APPLICATION VIEW -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="view-create-form" class="hidden animate-fade-in">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- ... existing form ... -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-6 border-b border-gray-100 bg-blue-50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-xl font-bold text-blue-900 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="plus-circle" class="w-5 h-5 mr-2"></i> New Application Entry
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-blue-600 text-sm mt-1">Select the specific form type below.</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <form id="admin-entry-form" class="p-8 space-y-5">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-2 gap-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Service Type</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <select id="entry-service" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="Income Certificate">Income Certificate (рдЖрдп рдкреНрд░рдорд╛рдг рдкрддреНрд░)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="Samagra ID">Samagra ID (рд╕рдордЧреНрд░ рдЖрдИрдбреА)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="MP Bhoj">MP Bhoj Form (рдПрдордкреА рднреЛрдЬ)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="Pan Card">Pan Card (рдкреИрди рдХрд╛рд░реНрдб)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="Aadhaar Update">Aadhaar Update (рдЖрдзрд╛рд░ рд╕реБрдзрд╛рд░)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <option value="Domicile Certificate">Domicile Certificate (рдореВрд▓ рдирд┐рд╡рд╛рд╕реА)</option>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Applicant Name</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="text" id="entry-name" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Full Name" required>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-2 gap-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="email" id="entry-email" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="applicant@example.com">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label class="block text-sm font-medium text-gray-700 mb-1">Aadhaar Number</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="text" id="entry-aadhaar" class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="XXXX-XXXX-XXXX" maxlength="14">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs text-gray-400 mt-1">Will store last 4 digits only</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="pt-4 border-t border-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="submit" class="w-full py-3 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 shadow-md transition-all flex justify-center items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="send" class="w-4 h-4 mr-2"></i> Submit Application
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </form>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <!-- ADMIN DETAILS VIEW -->
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="view-admins" class="hidden animate-fade-in">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-slate-50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-lg font-bold text-slate-800">Admin Management</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-xs text-slate-500">Add or Remove System Administrators</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="toggleModal('add-admin-modal')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors shadow-sm">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="user-plus" class="w-4 h-4 mr-2"></i> Add New Admin
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="overflow-x-auto">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <table class="w-full text-left">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <thead class="bg-slate-50 text-slate-500 text-xs uppercase font-semibold">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-4">Admin Email</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-4">Role</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-4">Status</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th class="px-6 py-4 text-right">Actions</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </thead>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tbody id="admins-table-body" class="divide-y divide-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr><td colspan="4" class="p-6 text-center text-gray-400">Loading admin details...</td></tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tbody>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </table>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </main>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>

┬а ┬а <!-- JAVASCRIPT LOGIC -->
┬а ┬а <script type="module">
┬а ┬а ┬а ┬а import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
┬а ┬а ┬а ┬а import {┬а
┬а ┬а ┬а ┬а ┬а ┬а getFirestore,┬а
┬а ┬а ┬а ┬а ┬а ┬а collection,┬а
┬а ┬а ┬а ┬а ┬а ┬а addDoc,┬а
┬а ┬а ┬а ┬а ┬а ┬а updateDoc,┬а
┬а ┬а ┬а ┬а ┬а ┬а getDoc,
┬а ┬а ┬а ┬а ┬а ┬а setDoc,
┬а ┬а ┬а ┬а ┬а ┬а doc,┬а
┬а ┬а ┬а ┬а ┬а ┬а onSnapshot,┬а
┬а ┬а ┬а ┬а ┬а ┬а serverTimestamp,┬а
┬а ┬а ┬а ┬а ┬а ┬а deleteDoc,
┬а ┬а ┬а ┬а ┬а ┬а orderBy,
┬а ┬а ┬а ┬а ┬а ┬а query┬а
┬а ┬а ┬а ┬а } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';
┬а ┬а ┬а ┬а import {┬а
┬а ┬а ┬а ┬а ┬а ┬а getAuth,┬а
┬а ┬а ┬а ┬а ┬а ┬а onAuthStateChanged,┬а
┬а ┬а ┬а ┬а ┬а ┬а signInWithEmailAndPassword,
┬а ┬а ┬а ┬а ┬а ┬а createUserWithEmailAndPassword,
┬а ┬а ┬а ┬а ┬а ┬а signOut┬а
┬а ┬а ┬а ┬а } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";


┬а ┬а ┬а ┬а // --- Configuration ---
┬а ┬а ┬а ┬а const firebaseConfig = {
┬а ┬а ┬а ┬а ┬а ┬а apiKey: "AIzaSyA-iZvVroV-H6aRs7X-mlnt_ra3_vnaNzg",
┬а ┬а ┬а ┬а ┬а ┬а authDomain: "allinone-aa89.firebaseapp.com",
┬а ┬а ┬а ┬а ┬а ┬а projectId: "allinone-aa89",
┬а ┬а ┬а ┬а ┬а ┬а storageBucket: "allinone-aa89.appspot.com",
┬а ┬а ┬а ┬а ┬а ┬а messagingSenderId: "924003122498",
┬а ┬а ┬а ┬а ┬а ┬а appId: "1:924003122498:web:2c86505457236e60055cdb",
┬а ┬а ┬а ┬а ┬а ┬а measurementId: "G-45N39T3BB6"
┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а const app = initializeApp(firebaseConfig);
┬а ┬а ┬а ┬а const auth = getAuth(app);
┬а ┬а ┬а ┬а const db = getFirestore(app);

┬а ┬а ┬а ┬а // --- Constants ---
┬а ┬а ┬а ┬а const COLLECTION_NAME = 'applications';┬а
┬а ┬а ┬а ┬а const LOGS_COLLECTION = 'admin_logs';
┬а ┬а ┬а ┬а const ADMINS_COLLECTION = "admins";
┬а ┬а ┬а ┬а const NOTIF_COLLECTION = "notifications";

┬а ┬а ┬а ┬а // --- State ---
┬а ┬а ┬а ┬а let applications = [];
┬а ┬а ┬а ┬а let adminList = [];┬а
┬а ┬а ┬а ┬а let unsubscribeApps = null;
┬а ┬а ┬а ┬а let unsubscribeAdmins = null;

┬а ┬а ┬а ┬а // --- Auth Logic (STRICT SECURITY) ---
┬а ┬а ┬а ┬а onAuthStateChanged(auth, async (user) => {
┬а ┬а ┬а ┬а ┬а ┬а const authLoader = document.getElementById('auth-loader');
┬а ┬а ┬а ┬а ┬а ┬а const dashboardView = document.getElementById('dashboard-view');

┬а ┬а ┬а ┬а ┬а ┬а if (!user) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.location.href = "adminlogin.html";┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const snap = await getDoc(doc(db, ADMINS_COLLECTION, user.uid));
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (!snap.exists()) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alert("Access denied: Not a registered admin.");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await signOut(auth);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.location.href = "adminlogin.html";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const admin = snap.data();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (admin.role !== "super_admin" || admin.status !== "active") {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alert("Restricted Access: Super Admin only.");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await signOut(auth);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.location.href = "adminlogin.html";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('admin-email-display').innerText = user.email || "Super Admin";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а authLoader.style.opacity = '0';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а authLoader.style.display = 'none';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а dashboardView.style.display = 'flex';┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }, 300);

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а setupRealtimeListeners();

┬а ┬а ┬а ┬а ┬а ┬а } catch (error) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Auth verification failed:", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await signOut(auth);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.location.href = "adminlogin.html";
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а // --- Listeners ---
┬а ┬а ┬а ┬а function setupRealtimeListeners() {
┬а ┬а ┬а ┬а ┬а ┬а const adminsRef = collection(db, ADMINS_COLLECTION);
┬а ┬а ┬а ┬а ┬а ┬а unsubscribeAdmins = onSnapshot(adminsRef, (snapshot) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let totalAdmins = 0;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а adminList = [];

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а snapshot.forEach(docSnap => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const d = docSnap.data();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а adminList.push({ id: docSnap.id, ...d });┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (d.status === "active") totalAdmins++;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById("stat-users").innerText = totalAdmins;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а renderAdmins();

┬а ┬а ┬а ┬а ┬а ┬а }, (error) => console.log("Admin stats require auth"));

┬а ┬а ┬а ┬а ┬а ┬а const appRef = collection(db, COLLECTION_NAME);
┬а ┬а ┬а ┬а ┬а ┬а unsubscribeApps = onSnapshot(appRef, (snapshot) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а applications = [];
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let stats = { total: 0, pending: 0, accepted: 0, rejected: 0 };
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let serviceCounts = {};

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а snapshot.forEach(docSnap => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const data = docSnap.data();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а applications.push({ id: docSnap.id, ...data });

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а stats.total++;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const st = (data.status || "pending").toLowerCase();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (st === "pending") stats.pending++;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а else if (st === "accepted") stats.accepted++;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а else if (st === "rejected") stats.rejected++;

const type = data.serviceType || data.formType || "Other";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а serviceCounts[type] = (serviceCounts[type] || 0) + 1;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а updateStatsUI(stats);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а renderServiceBreakdown(serviceCounts, stats.total);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а renderTable();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а }, (error) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Listener Error:", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а // ---- Notifications Listener ----
const notifQuery = query(
┬а ┬а collection(db, NOTIF_COLLECTION),
┬а ┬а orderBy("createdAt", "desc")
);

onSnapshot(notifQuery, (snapshot) => {
┬а ┬а const adminBox = document.getElementById("notif-list");
┬а ┬а const drawerBox = document.getElementById("drawer-notif-list");

┬а ┬а let html = "";

┬а ┬а if (snapshot.empty) {
┬а ┬а ┬а ┬а html = `<p class="text-gray-400 text-sm">No notifications</p>`;
┬а ┬а } else {
┬а ┬а ┬а ┬а snapshot.forEach(doc => {
┬а ┬а ┬а ┬а ┬а ┬а const n = doc.data();
┬а ┬а ┬а ┬а ┬а ┬а html += `
┬а ┬а ┬а ┬а ┬а ┬а <div class="border-l-4 border-blue-600 bg-blue-50 p-3 rounded">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="font-semibold text-sm">${n.title}</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs text-gray-600">${n.message}</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>`;
┬а ┬а ┬а ┬а });
┬а ┬а }

┬а ┬а if (adminBox) adminBox.innerHTML = html;
┬а ┬а if (drawerBox) drawerBox.innerHTML = html;
});

┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // --- UI Interactions ---
┬а ┬а ┬а ┬а document.addEventListener('DOMContentLoaded', () => {
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а // Admin Entry Form
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('admin-entry-form').addEventListener('submit', async (e) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а e.preventDefault();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const serviceType = document.getElementById('entry-service').value;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const applicantName = document.getElementById('entry-name').value;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const email = document.getElementById('entry-email').value;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const aadhaar = document.getElementById('entry-aadhaar').value;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const data = {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а serviceType,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а applicantName,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а email,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а aadhaarNumber: aadhaar┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await submitApplication(data);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а e.target.reset();
┬а ┬а ┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а ┬а ┬а // New Admin Form
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('new-admin-form').addEventListener('submit', async (e) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а e.preventDefault();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await createNewAdmin();
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а // --- Modal Logic ---
┬а ┬а ┬а ┬а window.toggleModal = (modalID) => {
┬а ┬а ┬а ┬а ┬а ┬а const modal = document.getElementById(modalID);
┬а ┬а ┬а ┬а ┬а ┬а modal.classList.toggle('opacity-0');
┬а ┬а ┬а ┬а ┬а ┬а modal.classList.toggle('pointer-events-none');
┬а ┬а ┬а ┬а ┬а ┬а document.body.classList.toggle('modal-active');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // --- Database Actions ---

┬а ┬а ┬а ┬а // 1. Submit Application
┬а ┬а ┬а ┬а async function submitApplication(formData) {
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.remove('hidden');

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const data = {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а serviceType: formData.serviceType,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а applicantName: formData.applicantName,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а email: formData.email,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а status: "pending",
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а createdAt: serverTimestamp()
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (formData.aadhaarNumber) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а data.aadhaarLast4 = formData.aadhaarNumber.slice(-4);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const docRef = await addDoc(collection(db, COLLECTION_NAME), data);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const applicationNumber = "AIO-" + docRef.id.substring(0, 8).toUpperCase();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await updateDoc(doc(db, COLLECTION_NAME, docRef.id), {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а applicationNumber
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await logActivity("New Submission", `App #${applicationNumber} - ${(formData.serviceType || formData.formType)}`, "info");

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast(`Application ${applicationNumber} Submitted!`);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а switchTab('dashboard');

┬а ┬а ┬а ┬а ┬а ┬а } catch (err) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error(err);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("Submission Failed");
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а }
window.addNotification = async () => {
┬а ┬а const title = document.getElementById("notif-title").value;
┬а ┬а const message = document.getElementById("notif-message").value;

┬а ┬а if (!title || !message) {
┬а ┬а ┬а ┬а alert("Title & message required");
┬а ┬а ┬а ┬а return;
┬а ┬а }

┬а ┬а try {
┬а ┬а ┬а ┬а await addDoc(collection(db, NOTIF_COLLECTION), {
┬а ┬а ┬а ┬а ┬а ┬а title: title,
┬а ┬а ┬а ┬а ┬а ┬а message: message,
┬а ┬а ┬а ┬а ┬а ┬а active: true,
┬а ┬а ┬а ┬а ┬а ┬а createdAt: serverTimestamp(),
┬а ┬а ┬а ┬а ┬а ┬а createdBy: auth.currentUser.email
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а document.getElementById("notif-title").value = "";
┬а ┬а ┬а ┬а document.getElementById("notif-message").value = "";

┬а ┬а ┬а ┬а showToast("Notification Published");

┬а ┬а } catch (err) {
┬а ┬а ┬а ┬а console.error(err);
┬а ┬а ┬а ┬а showToast("Failed to add notification");
┬а ┬а }
};

┬а ┬а ┬а ┬а // 2. Create New Admin (The smart way)
┬а ┬а ┬а ┬а async function createNewAdmin() {
┬а ┬а ┬а ┬а ┬а ┬а const email = document.getElementById('new-admin-email').value;
┬а ┬а ┬а ┬а ┬а ┬а const password = document.getElementById('new-admin-password').value;
┬а ┬а ┬а ┬а ┬а ┬а const role = document.getElementById('new-admin-role').value;
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.toggleModal('add-admin-modal');

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // Initialize a SECONDARY App to create user without logging out the current Super Admin
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const secondaryApp = initializeApp(firebaseConfig, "Secondary");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const secondaryAuth = getAuth(secondaryApp);

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const userCredential = await createUserWithEmailAndPassword(secondaryAuth, email, password);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const newUser = userCredential.user;

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // Add to Firestore 'admins' collection
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await setDoc(doc(db, ADMINS_COLLECTION, newUser.uid), {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а email: email,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а role: role,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а status: 'active',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а createdAt: serverTimestamp()
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await logActivity("Admin Created", `Added new admin: ${email}`, "success");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // Cleanup secondary app logout (just in case)
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await signOut(secondaryAuth);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('new-admin-form').reset();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("New Admin Created Successfully!");

┬а ┬а ┬а ┬а ┬а ┬а } catch (error) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Error creating admin:", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let msg = "Failed to create admin";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(error.code === 'auth/email-already-in-use') msg = "Email already registered!";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(error.code === 'auth/weak-password') msg = "Password too weak (min 6 chars)";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alert(msg);
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // 3. Delete Admin
┬а ┬а ┬а ┬а window.deleteAdmin = async (id, email) => {
┬а ┬а ┬а ┬а ┬а ┬а if(!confirm(`Are you sure you want to remove admin access for ${email}?`)) return;
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // We delete the document from Firestore.┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // Note: The user remains in Auth but loses access because we check the DB on login.
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await deleteDoc(doc(db, ADMINS_COLLECTION, id));
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await logActivity("Admin Removed", `Removed admin: ${email}`, "warning");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("Admin Removed Successfully");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а } catch (error) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error(error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('loading').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("Failed to remove admin");
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а async function updateStatus(id, newStatus) {
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await updateDoc(doc(db, COLLECTION_NAME, id), {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а status: newStatus.toLowerCase()
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await logActivity("Status Update", `App ID ${id.substring(0,5)}... marked as ${newStatus}`, newStatus === 'Accepted' ? 'success' : 'warning');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast(`Status updated to ${newStatus}`);
┬а ┬а ┬а ┬а ┬а ┬а } catch (e) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error(e);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("Update Failed");
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а async function logActivity(action, details, type) {
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await addDoc(collection(db, LOGS_COLLECTION), {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а action, details, type,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а createdAt: serverTimestamp(),
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а time: new Date().toLocaleTimeString()
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а } catch (e) { console.error("Log error"); }
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // --- UI Rendering ---

┬а ┬а ┬а ┬а function updateStatsUI(stats) {
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('stat-total').innerText = stats.total;
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('stat-pending').innerText = stats.pending;
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('stat-accepted').innerText = stats.accepted;
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('stat-rejected').innerText = stats.rejected;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderServiceBreakdown(counts, total) {
┬а ┬а ┬а ┬а ┬а ┬а const container = document.getElementById('service-breakdown');
┬а ┬а ┬а ┬а ┬а ┬а if (total === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а container.innerHTML = '<div class="text-sm text-gray-400">No data available</div>';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а // ... (Same logic as before)
┬а ┬а ┬а ┬а ┬а ┬а const services = [
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'Income Certificate', icon: 'banknote', color: 'text-green-600', bg: 'bg-green-100' },
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'Samagra ID', icon: 'users', color: 'text-blue-600', bg: 'bg-blue-100' },
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'MP Bhoj', icon: 'book-open', color: 'text-purple-600', bg: 'bg-purple-100' },
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'Pan Card', icon: 'credit-card', color: 'text-orange-600', bg: 'bg-orange-100' },
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'Aadhaar Update', icon: 'fingerprint', color: 'text-red-600', bg: 'bg-red-100' },
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а { name: 'Domicile Certificate', icon: 'home', color: 'text-indigo-600', bg: 'bg-indigo-100' }
┬а ┬а ┬а ┬а ┬а ┬а ];

┬а ┬а ┬а ┬а ┬а ┬а let html = '';
┬а ┬а ┬а ┬а ┬а ┬а Object.entries(counts).forEach(([serviceName, count]) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let def = services.find(s => serviceName.includes(s.name) || s.name.includes(serviceName)) || { icon: 'file', color: 'text-gray-600', bg: 'bg-gray-100' };
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const percentage = Math.round((count / total) * 100);

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а html += `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center space-x-3">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-2 rounded-md ${def.bg} ${def.color}">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="${def.icon}" class="w-4 h-4"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm font-medium text-gray-800 truncate w-32">${serviceName}</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="w-24 bg-gray-200 rounded-full h-1.5 mt-1">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-slate-800 h-1.5 rounded-full" style="width: ${percentage}%"></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-right">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm font-bold text-gray-900">${count}</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs text-gray-500">${percentage}%</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>`;
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а container.innerHTML = html;
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderTable() {
┬а ┬а ┬а ┬а ┬а ┬а const tbody = document.getElementById('forms-table-body');
┬а ┬а ┬а ┬а ┬а ┬а if (applications.length === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а tbody.innerHTML = `<tr><td colspan="4" class="p-8 text-center text-gray-400">No applications found.</td></tr>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а tbody.innerHTML = applications.map(app => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const status = (app.status || 'pending').toLowerCase();┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let badgeClass = 'bg-yellow-100 text-yellow-700';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (status === 'accepted') badgeClass = 'bg-green-100 text-green-700';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (status === 'rejected') badgeClass = 'bg-red-100 text-red-700';

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let dateStr = "N/A";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(app.createdAt && app.createdAt.seconds) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а dateStr = new Date(app.createdAt.seconds * 1000).toLocaleDateString();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let actions = '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (status === 'pending') {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а actions = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="window.updateStatus('${app.id}', 'Accepted')" class="p-1.5 text-green-600 hover:bg-green-100 rounded mr-1" title="Accept"><i data-lucide="check" class="w-5 h-5"></i></button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="window.updateStatus('${app.id}', 'Rejected')" class="p-1.5 text-red-600 hover:bg-red-100 rounded" title="Reject"><i data-lucide="x" class="w-5 h-5"></i></button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а actions = `<span class="text-xs uppercase font-bold text-gray-400">${status}</span>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr class="hover:bg-gray-50 border-b border-gray-100 last:border-0">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
<div class="font-bold text-gray-800">
┬а ${app.serviceType || app.formType || 'Unknown'}
</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-xs text-blue-600 font-medium">${app.applicationNumber || 'Processing...'}</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-sm text-gray-900 font-medium">${app.applicantName || 'N/A'}</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="text-xs text-gray-500">${dateStr}</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="px-3 py-1 rounded-full text-xs font-medium capitalize ${badgeClass}">${status}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4 text-right">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${actions}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а }).join('');
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderAdmins() {
┬а ┬а ┬а ┬а ┬а ┬а const container = document.getElementById('admins-table-body');
┬а ┬а ┬а ┬а ┬а ┬а if(adminList.length === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а container.innerHTML = '<tr><td colspan="4" class="p-6 text-center text-gray-400 text-sm">No admins found</td></tr>';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а container.innerHTML = adminList.map(admin => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const isMe = auth.currentUser && auth.currentUser.uid === admin.id;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let roleColor = admin.role === 'super_admin' ? 'text-purple-600 bg-purple-100' : 'text-blue-600 bg-blue-100';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let statusColor = admin.status === 'active' ? 'text-green-600 bg-green-50' : 'text-red-600 bg-red-50';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // --- Delete Button Logic ---
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // Show delete button ONLY if it's not the current user
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let deleteBtn = '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (!isMe) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а deleteBtn = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="window.deleteAdmin('${admin.id}', '${admin.email}')" class="text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-full transition-colors" title="Remove Admin">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="trash-2" class="w-4 h-4"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а deleteBtn = `<span class="text-xs text-gray-400 italic">Current User</span>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr class="hover:bg-slate-50 border-b border-gray-100 last:border-0 transition-colors">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-xs mr-3">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${admin.email ? admin.email.charAt(0).toUpperCase() : 'A'}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-sm font-medium text-slate-700">${admin.email || 'No Email'}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="px-2.5 py-1 rounded-md text-xs font-semibold capitalize ${roleColor}">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${admin.role ? admin.role.replace('_', ' ') : 'User'}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="flex items-center w-fit px-2.5 py-1 rounded-full text-xs font-medium ${statusColor}">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1.5 h-1.5 rounded-full ${admin.status === 'active' ? 'bg-green-500' : 'bg-red-500'} mr-2"></span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${admin.status || 'Unknown'}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <td class="px-6 py-4 text-right">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${deleteBtn}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </td>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а }).join('');
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // --- Global Exports ---
┬а ┬а ┬а ┬а window.switchTab = (tabId) => {
┬а ┬а ┬а ┬а ┬а ┬а document.querySelectorAll('.nav-item').forEach(el => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(el.dataset.tab === tabId) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а el.classList.remove('border-transparent', 'text-slate-400', 'hover:bg-slate-800');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а el.classList.add('border-blue-500', 'bg-slate-800', 'text-blue-400');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а el.classList.add('border-transparent', 'text-slate-400', 'hover:bg-slate-800');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а el.classList.remove('border-blue-500', 'bg-slate-800', 'text-blue-400');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('view-dashboard').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('view-create-form').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('view-admins').classList.add('hidden');┬а
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById(`view-${tabId}`).classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а const titles = {'dashboard': 'Overview', 'create-form': 'Admin Entry', 'admins': 'Admin Management'};
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('page-title').innerText = titles[tabId];
┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а window.showToast = (msg) => {
┬а ┬а ┬а ┬а ┬а ┬а const el = document.getElementById('toast');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('toast-message').innerText = msg;
┬а ┬а ┬а ┬а ┬а ┬а el.classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а setTimeout(() => el.classList.add('hidden'), 3000);
┬а ┬а ┬а ┬а };
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а window.updateStatus = updateStatus;
┬а ┬а ┬а ┬а window.logoutSystem = async () => {
┬а ┬а ┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(unsubscribeApps) unsubscribeApps();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if(unsubscribeAdmins) unsubscribeAdmins();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await logActivity("Logout", "User manually logged out", "warning");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а await signOut(auth);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.location.href = "adminlogin.html";
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а } catch (error) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Logout failed:", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showToast("Logout failed");
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а };
window.openNotif = () => {
┬а ┬а document.getElementById("notif-drawer")
┬а ┬а ┬а ┬а .classList.remove("translate-x-full");
};

window.closeNotif = () => {
┬а ┬а document.getElementById("notif-drawer")
┬а ┬а ┬а ┬а .classList.add("translate-x-full");
};

┬а ┬а </script>
┬а <div id="notif-drawer"
┬аclass="fixed top-0 right-0 h-full w-96 bg-white shadow-xl z-[110]
┬аtransform translate-x-full transition-transform duration-300 rounded-l-2xl">

┬а ┬а <!-- HEADER -->
┬а ┬а <div class="p-4 bg-blue-900 text-white flex justify-between">
┬а ┬а ┬а ┬а <h3 class="font-bold">рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реВрдЪрдирд╛рдПрдВ</h3>
┬а ┬а ┬а ┬а <button onclick="closeNotif()">тЬХ</button>
┬а ┬а </div>

┬а ┬а <!-- OPTIONAL: Admin preview list -->
┬а ┬а <div id="notif-list" class="p-4 space-y-3 border-b"></div>

┬а ┬а <!-- MAIN DRAWER LIST -->
┬а ┬а <div id="drawer-notif-list"
┬а ┬а ┬а ┬а ┬аclass="p-4 space-y-3 overflow-y-auto h-full"></div>
</div>


</body>
</html>
isme notification jo yahi icon par click karne par dikh raha hai mai chahta hu ye notification index.html me dikhe ye sahi karo fir mai index ki file dunga use sahi karna 
