<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AllInOne | MP Govt Services Portal</title>
    <!-- Tailwind CSS for utility classes -->
    <!-- Font Awesome for Icons -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="assets/css/homeheader.css">

    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
       @import url('https://fonts.googleapis.com/css2?family=Hind:wght@400;500;600;700&display=swap');
        body { font-family: 'Hind', sans-serif; }
        .hero-gradient { background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); }
        .service-card { 
            transition: all 0.3s ease; 
            border: 1px solid #f1f5f9; 
        }
        .service-card:hover { 
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .category-tab {
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        .category-tab:hover {
            background-color: #eff6ff;
        }
        .category-tab.active {
            background-color: #2563eb;
            color: white;
        }

/* Ye rule automatic saare cards ko center aur sahi size ka rakhega */
#servicesContainer > .service-card {
    width: 100%;
    max-width: 350px; /* Card ka size yahan se control hoga */
    margin-left: auto;
    margin-right: auto;
}

/* Desktop alignment fix */
@media (min-width: 1024px) {
    #servicesContainer {
        width: 100%;
        display: grid;
    }
}
        .service-card {
    display: flex;
    flex-direction: column;
    height: 100%; /* Saare cards ek barabar lambai ke rahenge */
    min-width: 250px; /* Card ko ek limit se zyada pichakne nahi dega */
    flex: 1 1 300px; /* Ye magic property hai: (grow, shrink, base-width) */
}
        
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <div id="header"></div>
<section class="relative overflow-hidden bg-gradient-to-b from-[#1e40af] to-[#172554] py-10 md:py-16 px-4">
    <div class="absolute top-0 right-0 w-64 h-64 bg-blue-400/5 rounded-full blur-[80px]"></div>
<div class="relative z-10 max-w-4xl mx-auto">
        <div class="text-center">
            <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-blue-200 text-[10px] font-semibold uppercase tracking-widest mb-4">
                <span class="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span>
                 New Service Portal 2026</span>
            <h1 class="text-4xl md:text-6xl font-black text-white mb-6 tracking-tight leading-[1.1]">
                सभी सरकारी सेवाएँ,  <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-200 via-white to-blue-100">अब आपकी उंगलियों पर</span>
            </h1>
        
            <div class="relative max-w-2xl mx-auto mb-8">
                <div class="relative flex items-center bg-white rounded-xl p-1 shadow-xl border border-white/20">
                    <div class="pl-4 text-blue-900/40">
                        <i class="fas fa-search text-base"></i>
                    </div>
                    <input type="text" 
                           placeholder="Aadhaar, PAN, Samagra खोजें..." 
                           class="w-full py-2.5 md:py-3 px-3 bg-transparent focus:outline-none text-gray-700 font-medium text-sm md:text-base">
                    <button class="bg-[#1e3a8a] hover:bg-blue-700 text-white px-6 md:px-10 py-2.5 md:py-3 rounded-lg font-bold text-sm md:text-base transition-all active:scale-95">
                        खोजें
                    </button>
                </div>
            </div>

            <div class="flex flex-wrap justify-center items-center gap-4 md:gap-8 opacity-90">
                <div class="flex items-center gap-2">
                    <i class="fas fa-shield-alt text-blue-300 text-xs"></i>
                    <span class="text-white/80 text-[11px] md:text-xs font-medium">सुरक्षित पोर्टल</span>
                </div>
                <div class="flex items-center gap-2">
                    <i class="fas fa-bolt text-yellow-300 text-xs"></i>
                    <span class="text-white/80 text-[11px] md:text-xs font-medium">फास्ट प्रोसेस</span>
                </div>
                <div class="flex items-center gap-2">
                    <i class="fas fa-headset text-green-300 text-xs"></i>
                    <span class="text-white/80 text-[11px] md:text-xs font-medium">24/7 सहायता</span>
                </div>
            </div>
        </div>
    </div>
<!-- TRACK APPLICATION (FIXED & CENTER) -->
<section class="bg-white py-6">
  <div class="container mx-auto px-4 flex justify-center">
    <div class="bg-white shadow-lg rounded-2xl border-l-8 border-blue-600 w-full max-w-2xl px-6 py-6 transform transition-all hover:shadow-xl">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="text-center md:text-left">
          <h4 class="font-bold text-gray-800 text-lg flex items-center gap-2">
            <i class="fas fa-search-location text-blue-600"></i>
            आवेदन की स्थिति जांचें
          </h4>
          <p class="text-sm text-gray-500">अपना आवेदन क्रमांक डालें (जैसे: AIO-123456)</p>
        </div>

        <div class="flex items-center gap-2 w-full md:w-auto">
          <input
            id="trackInput"
            type="text"
            placeholder="AIO-XXXXXX"
            class="border-2 border-gray-200 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none w-full md:w-56 uppercase font-semibold tracking-wide"
            onkeypress="if(event.key==='Enter') trackApplication()"
          />
          <button
            id="trackBtn"
            onclick="trackApplication()"
            class="bg-blue-600 text-white px-5 py-2 rounded-lg font-bold hover:bg-blue-700 active:scale-95 transition-all whitespace-nowrap flex items-center gap-2"
          >
            <span>Track</span>
            <i class="fas fa-arrow-right text-sm"></i>
          </button>
        </div>
      </div>

      <!-- RESULT BOX -->
      <div id="trackResult" class="hidden mt-4 rounded-xl border-l-4 text-sm md:text-base animate-fade-in overflow-hidden">
        <!-- यहाँ रिजल्ट दिखेगा -->
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in { animation: fadeIn 0.3s ease-out; }
  
  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 600;
  }
  
  .info-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .info-row:last-child { border-bottom: none; }
  
  .label { font-weight: 600; color: #4b5563; }
  .value { font-weight: 700; color: #1f2937; text-align: right; }
</style>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import {
    getFirestore,
    collection,
    query,
    where,
    getDocs,
    orderBy
  } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  /* ===== FIREBASE CONFIG ===== */
  const firebaseConfig = {
    apiKey: "AIzaSyA-iZvVroV-H6aRs7X-mlnt_ra3_vnaNzg",
    authDomain: "allinone-aa89.firebaseapp.com",
    projectId: "allinone-aa89"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  /* ===== GLOBAL TRACK FUNCTION ===== */
  window.trackApplication = async function () {
    const input = document.getElementById("trackInput").value.trim().toUpperCase();
    const resultBox = document.getElementById("trackResult");
    const trackBtn = document.getElementById("trackBtn");
    
    // Reset and show loading
    resultBox.classList.remove("hidden");
    resultBox.className = "mt-4 p-5 rounded-xl border-l-4 text-sm md:text-base animate-fade-in bg-blue-50 border-blue-500 text-blue-700";
    resultBox.innerHTML = `
      <div class="flex items-center justify-center gap-3 py-4">
        <i class="fas fa-spinner fa-spin text-2xl"></i>
        <span class="font-semibold">आपका आवेदन खोजा जा रहा है...</span>
      </div>
    `;
    
    trackBtn.disabled = true;
    trackBtn.classList.add('opacity-75', 'cursor-not-allowed');

    // Validation
    if (!input || !input.startsWith("AIO-") || input.length < 8) {
      resultBox.className = "mt-4 p-5 rounded-xl border-l-4 text-sm md:text-base animate-fade-in bg-red-50 border-red-500 text-red-700";
      resultBox.innerHTML = `
        <div class="flex items-start gap-3">
          <i class="fas fa-exclamation-circle text-xl mt-0.5"></i>
          <div>
            <p class="font-bold text-lg">अमान्य आवेदन क्रमांक</p>
            <p class="text-sm mt-1">कृपया सही प्रारूप में डालें: <b>AIO-123456</b></p>
          </div>
        </div>
      `;
      trackBtn.disabled = false;
      trackBtn.classList.remove('opacity-75', 'cursor-not-allowed');
      return;
    }

    try {
      const collections = [
        "applications",
        "samagra_ekyc_requests", 
        "mpbhojApplications"
      ];

      let foundData = null;
      let foundCollection = "";

      // Search in all collections
      for (const col of collections) {
        const q = query(
          collection(db, col),
          where("applicationNumber", "==", input)
        );
        const snap = await getDocs(q);
        
        if (!snap.empty) {
          foundData = snap.docs[0].data();
          foundCollection = col;
          break;
        }
      }

      if (!foundData) {
        resultBox.className = "mt-4 p-5 rounded-xl border-l-4 text-sm md:text-base animate-fade-in bg-red-50 border-red-500 text-red-700";
        resultBox.innerHTML = `
          <div class="flex items-start gap-3">
            <i class="fas fa-times-circle text-2xl mt-0.5"></i>
            <div>
              <p class="font-bold text-lg">आवेदन नहीं मिला</p>
              <p class="text-sm mt-1">इस क्रमांक से कोई आवेदन हमारे रिकॉर्ड में नहीं मिला। कृपया जाँचें:</p>
              <ul class="text-xs mt-2 space-y-1 list-disc list-inside opacity-80">
                <li>क्या क्रमांक सही लिखा है?</li>
                <li>AIO- के बाद कम से कम 6 अंक होने चाहिए</li>
                <li>कैपिटल लेटर्स में लिखें</li>
              </ul>
            </div>
          </div>
        `;
      } else {
        // Determine status configuration
        let statusConfig = {
          bg: "bg-yellow-50",
          border: "border-yellow-500",
          text: "text-yellow-800",
          badgeBg: "bg-yellow-100",
          badgeText: "text-yellow-800",
          icon: "clock",
          label: "प्रक्रियाधीन"
        };
        
        const status = (foundData.status || "").toLowerCase();
        
        if (status === "complete" || status === "completed" || status === "approved" || status === "success") {
          statusConfig = { 
            bg: "bg-green-50", 
            border: "border-green-500", 
            text: "text-green-800",
            badgeBg: "bg-green-100",
            badgeText: "text-green-800",
            icon: "check-circle", 
            label: "पूर्ण / स्वीकृत" 
          };
        } else if (status === "reject" || status === "rejected" || status === "cancelled" || status === "declined") {
          statusConfig = { 
            bg: "bg-red-50", 
            border: "border-red-500", 
            text: "text-red-800",
            badgeBg: "bg-red-100",
            badgeText: "text-red-800",
            icon: "times-circle", 
            label: "अस्वीकृत" 
          };
        } else if (status === "processing" || status === "under_review" || status === "pending") {
          statusConfig = { 
            bg: "bg-blue-50", 
            border: "border-blue-500", 
            text: "text-blue-800",
            badgeBg: "bg-blue-100",
            badgeText: "text-blue-800",
            icon: "spinner", 
            label: "प्रक्रियाधीन" 
          };
        }

        // Get Service Type (check multiple possible field names)
        const serviceType = foundData.serviceType || foundData.service || foundData.serviceName || 
                           foundData.applicationType || foundData.type || getServiceNameFromCollection(foundCollection);
        
        // Get Applicant Name (check multiple fields)
        const applicantName = foundData.applicantName || foundData.name || foundData.fullName || 
                             foundData.studentName || foundData.userName || "-";
        
        // Get Mobile
        const mobile = foundData.mobile || foundData.phone || foundData.mobileNumber || foundData.contact || "-";
        
        // Get Date
        let dateStr = "-";
        if (foundData.createdAt) {
          if (foundData.createdAt.toDate) {
            dateStr = foundData.createdAt.toDate().toLocaleDateString('hi-IN', {
              day: '2-digit',
              month: 'long',
              year: 'numeric'
            });
          } else if (foundData.createdAt.seconds) {
            dateStr = new Date(foundData.createdAt.seconds * 1000).toLocaleDateString('hi-IN', {
              day: '2-digit',
              month: 'long',
              year: 'numeric'
            });
          }
        } else if (foundData.date) {
          dateStr = foundData.date;
        } else if (foundData.applicationDate) {
          dateStr = foundData.applicationDate;
        }

        // Build Result HTML
        resultBox.className = `mt-4 rounded-xl border-l-4 text-sm md:text-base animate-fade-in ${statusConfig.bg} ${statusConfig.border} ${statusConfig.text}`;
        
        resultBox.innerHTML = `
          <div class="space-y-3">
            <!-- Header with Status -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-2 pb-3 border-b border-current border-opacity-20">
              <div>
                <span class="text-xs opacity-70 uppercase tracking-wider">आवेदन क्रमांक</span>
                <h3 class="text-xl font-black tracking-wide">${foundData.applicationNumber}</h3>
              </div>
              <div class="status-badge ${statusConfig.badgeBg} ${statusConfig.badgeText}">
                <i class="fas fa-${statusConfig.icon}"></i>
                <span>${statusConfig.label}</span>
              </div>
            </div>
            
            <!-- Service Type Highlight -->
            <div class="bg-white bg-opacity-60 p-3 rounded-lg">
              <div class="label text-xs uppercase tracking-wider mb-1">सेवा का प्रकार (Service Type)</div>
              <div class="value text-lg text-blue-700">${serviceType}</div>
            </div>
            
            <!-- Details Grid -->
            <div class="grid md:grid-cols-2 gap-4 mt-3">
              <div class="space-y-2">
                <div class="info-row">
                  <span class="label text-xs">आवेदक का नाम:</span>
                  <span class="value text-sm">${applicantName}</span>
                </div>
                <div class="info-row">
                  <span class="label text-xs">मोबाइल नंबर:</span>
                  <span class="value text-sm">${mobile}</span>
                </div>
              </div>
              
              <div class="space-y-2">
                <div class="info-row">
                  <span class="label text-xs">आवेदन तिथि:</span>
                  <span class="value text-sm">${dateStr}</span>
                </div>
                <div class="info-row">
                  <span class="label text-xs">विभाग:</span>
                  <span class="value text-sm">${getDepartmentName(foundCollection)}</span>
                </div>
              </div>
            </div>
            
            <!-- Remarks if any -->
            ${foundData.remarks || foundData.comment || foundData.notes ? `
              <div class="mt-3 p-3 bg-white bg-opacity-40 rounded-lg border border-current border-opacity-10">
                <div class="label text-xs mb-1">टिप्पणी / Remarks:</div>
                <div class="text-sm font-medium">${foundData.remarks || foundData.comment || foundData.notes}</div>
              </div>
            ` : ''}
            
            <!-- Action Buttons -->
            <div class="flex gap-2 mt-4 pt-3 border-t border-current border-opacity-20">
              <button onclick="printApplication('${foundData.applicationNumber}')" 
                      class="flex-1 bg-white bg-opacity-50 hover:bg-opacity-100 text-current py-2 rounded-lg font-semibold text-xs transition-all flex items-center justify-center gap-2">
                <i class="fas fa-print"></i> प्रिंट करें
              </button>
              <button onclick="downloadReceipt('${foundData.applicationNumber}')" 
                      class="flex-1 bg-white bg-opacity-50 hover:bg-opacity-100 text-current py-2 rounded-lg font-semibold text-xs transition-all flex items-center justify-center gap-2">
                <i class="fas fa-download"></i> रसीद डाउनलोड
              </button>
            </div>
          </div>
        `;
      }
    } catch (error) {
      console.error("Track Error:", error);
      resultBox.className = "mt-4 p-5 rounded-xl border-l-4 text-sm md:text-base animate-fade-in bg-red-50 border-red-500 text-red-700";
      resultBox.innerHTML = `
        <div class="flex items-center gap-3">
          <i class="fas fa-exclamation-triangle text-2xl"></i>
          <div>
            <p class="font-bold">तकनीकी त्रुटि</p>
            <p class="text-xs mt-1">कृपया बाद में प्रयास करें या हेल्पलाइन पर संपर्क करें।</p>
          </div>
        </div>
      `;
    } finally {
      trackBtn.disabled = false;
      trackBtn.classList.remove('opacity-75', 'cursor-not-allowed');
    }
  };

  // Helper function to get service name from collection
  function getServiceNameFromCollection(colName) {
    const map = {
      "applications": "सामान्य सेवा",
      "samagra_ekyc_requests": "समग्र ई-केवाईसी",
      "mpbhojApplications": "MP भोज यूनिवर्सिटी"
    };
    return map[colName] || "सरकारी सेवा";
  }

  // Helper function to get department name
  function getDepartmentName(colName) {
    const map = {
      "applications": "सामान्य प्रशासन",
      "samagra_ekyc_requests": "समग्र पोर्टल",
      "mpbhojApplications": "MP भोज मुक्त विश्वविद्यालय"
    };
    return map[colName] || "मध्य प्रदेश सरकार";
  }

  // Placeholder functions for print/download
  window.printApplication = function(appNo) {
    alert("प्रिंट फंक्शन: " + appNo + "\n(इसे अपने backend से जोड़ें)");
  };
  
  window.downloadReceipt = function(appNo) {
    alert("डाउनलोड फंक्शन: " + appNo + "\n(इसे अपने backend से जोड़ें)");
  };

  /* ===== NOTIFICATION LISTENER ===== */
  const notifQuery = query(
    collection(db, "notifications"),
    where("active", "==", true),
    orderBy("createdAt", "desc")
  );

  onSnapshot(notifQuery, (snapshot) => {
    const drawerBox = document.getElementById("drawer-notif-list");
    if (!drawerBox) return;

    if (snapshot.empty) {
      drawerBox.innerHTML = `
        <div class="text-center py-8 text-gray-400">
          <i class="fas fa-inbox text-4xl mb-2 opacity-30"></i>
          <p class="text-sm">कोई नई सूचना नहीं</p>
        </div>`;
      return;
    }

    let html = "";
    snapshot.forEach(doc => {
      const n = doc.data();
      const time = n.createdAt ? new Date(n.createdAt.toDate()).toLocaleDateString('hi-IN') : '';
      html += `
        <div class="border-l-4 border-blue-600 bg-gradient-to-r from-blue-50 to-white p-4 rounded-r-xl shadow-sm hover:shadow-md transition-shadow">
          <div class="flex justify-between items-start mb-1">
            <h4 class="font-bold text-sm text-gray-800">${n.title}</h4>
            <span class="text-[10px] text-gray-400">${time}</span>
          </div>
          <p class="text-xs text-gray-600 leading-relaxed">${n.message}</p>
        </div>
      `;
    });
    drawerBox.innerHTML = html;
  });
</script>
  /* ===== NOTIFICATION LISTENER ===== */
  const notifQuery = query(
    collection(db, "notifications"),
    where("active", "==", true),
    orderBy("createdAt", "desc")
  );

  onSnapshot(notifQuery, (snapshot) => {
    const drawerBox = document.getElementById("drawer-notif-list");
    if (!drawerBox) return;

    if (snapshot.empty) {
      drawerBox.innerHTML = `
        <div class="text-center py-8 text-gray-400">
          <i class="fas fa-inbox text-4xl mb-2 opacity-30"></i>
          <p class="text-sm">कोई नई सूचना नहीं</p>
        </div>`;
      return;
    }

    let html = "";
    snapshot.forEach(doc => {
      const n = doc.data();
      const time = n.createdAt ? new Date(n.createdAt.toDate()).toLocaleDateString('hi-IN') : '';
      html += `
        <div class="border-l-4 border-blue-600 bg-gradient-to-r from-blue-50 to-white p-4 rounded-r-xl shadow-sm hover:shadow-md transition-shadow">
          <div class="flex justify-between items-start mb-1">
            <h4 class="font-bold text-sm text-gray-800">${n.title}</h4>
            <span class="text-[10px] text-gray-400">${time}</span>
          </div>
          <p class="text-xs text-gray-600 leading-relaxed">${n.message}</p>
        </div>
      `;
    });
    drawerBox.innerHTML = html;
  });
</script>


    <style>
/* Navy Blue Color Palette */
:root {
    --navy-dark: #1e3a8a; /* Navy Blue */
    --blue-soft: #eff6ff; /* Very Light Blue */
    --blue-border: #dbeafe;
}

/* Arrow Animation: Left to Right */
@keyframes bounceRight {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(5px); }
}
.animate-bounce-right {
    animation: bounceRight 1s infinite;
}

.scrollbar-hide::-webkit-scrollbar { display: none; }

/* Soft Tab Styling */
.soft-tab {
    padding: 0.5rem 1.2rem;
    background-color: transparent;
    color: #64748b; /* Slate-500 */
    font-weight: 500;
    font-size: 0.85rem;
    border-radius: 10px;
    white-space: nowrap;
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.soft-tab:hover {
    background-color: var(--blue-soft);
    color: var(--navy-dark);
}

/* Active State: Soft Blue Background with Navy Text */
.active-soft {
    background-color: var(--blue-soft) !important;
    color: var(--navy-dark) !important;
    font-weight: 700;
    border: 1px solid var(--blue-border) !important;
}

.text-navy-700 { color: var(--navy-dark); }

</style>

<div class="max-w-7xl mx-auto px-4 mb-10">
    <div id="filterWrapper" class="relative flex items-center bg-slate-50 rounded-2xl p-1 transition-all duration-500 ease-in-out border border-slate-200 overflow-hidden h-14">
        
        <div id="filterLabel" class="flex items-center gap-2 px-4 cursor-pointer min-w-max text-navy-700 hover:text-blue-600 transition-colors">
            <span class="text-xs md:text-sm font-semibold tracking-tight uppercase opacity-70"> click for Fast Search</span>
            <i class="fas fa-arrow-right text-xs animate-bounce-right"></i>
        </div>

        <div id="scrollTabs" class="flex gap-2 overflow-x-auto items-center px-2 opacity-0 invisible transition-all duration-500 translate-x-5 scrollbar-hide">
            <button onclick="filterServices('all', this)" class="soft-tab active-soft">All</button>
            <button onclick="filterServices('certificates', this)" class="soft-tab">प्रमाण पत्र</button>
            <button onclick="filterServices('yojna', this)" class="soft-tab">सरकारी योजनाएं</button>
            <button onclick="filterServices('form', this)" class="soft-tab">यूनिवर्सिटी/फार्म</button>
            <button onclick="filterServices('yojna', this)" class="soft-tab">कृषि सेवा (MP)</button>
            <button onclick="filterServices('job', this)" class="soft-tab">रोजगार पंजीयन </button>
        </div>
    </div>
</div>

<script>
const filterLabel = document.getElementById('filterLabel');
const scrollTabs = document.getElementById('scrollTabs');

filterLabel.addEventListener('click', () => {
    // Label ko slide karke gayab karein
    filterLabel.classList.add('opacity-0', '-translate-x-full');
    setTimeout(() => { filterLabel.style.display = 'none'; }, 300);
    
    // Tabs ko soft tarike se show karein
    scrollTabs.classList.remove('opacity-0', 'invisible', 'translate-x-5');
    scrollTabs.classList.add('opacity-100', 'visible', 'translate-x-0');
});

function filterServices(category, btn) {
    // Remove active style from all
    document.querySelectorAll('.soft-tab').forEach(t => t.classList.remove('active-soft'));
    // Add to clicked
    if(btn) btn.classList.add('active-soft');

    // Your existing card filter logic
    const cards = document.querySelectorAll('.service-card');
    cards.forEach(card => {
        const cats = card.getAttribute('data-category') || "";
        card.style.display = (category === 'all' || cats.includes(category)) ? "block" : "none";
    });
}
</script>

  <!-- Grid -->

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-4 max-w-7xl mx-auto">

        <!-- Main Content -->
        
        <!-- mp bhoj work -->
             <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="form">
             <div class="text-teal-600 text-3xl mb-4"><i class="fa-solid fa-building-columns"></i></div>
             <h4 class="font-bold text-lg mb-2">Mp BHOJ UNIVERSITY BHOPAL</h4>
            <p class="text-sm text-gray-600 mb-4">MPBOU</p>
           <a href="mpbhoj.html"   class="bg-teal-50 text-teal-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-teal-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>
 
<!-- Samagra Card -->
                    <div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="all">
                        <div class="text-blue-600 text-3xl mb-4"><i class="fas fa-id-card"></i></div>
                        <h4 class="font-bold text-lg mb-2">समग्र ई-केवाईसी</h4>
                        <p class="text-sm text-gray-600 mb-6">समग्र आईडी में आधार लिंक करने की प्रक्रिया।</p>
                        <a href="samagr.html"   class="bg-blue-50 text-blue-600 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-blue-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>

<!-- Bhulekh Card -->
                    <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="land">
                        <div class="text-green-600 text-3xl mb-4"><i class="fas fa-map"></i></div>
                        <h4 class="font-bold text-lg mb-2">खसरा / खतौनी</h4>
                        <p class="text-sm text-gray-600 mb-4">अपनी भूमि का विवरण एवं नक्शा ऑनलाइन देखें।</p>
                        <a href="khasra.html"   class="bg-green-50 text-green-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-green-600 hover:text-white transition">विवरण देखें <i class="fas fa-arrow-right"></i></a>
                    </div>
<!-- आय प्रमाण पत्र -->
 <div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-orange-600 text-3xl mb-4"><i class="fas fa-file-alt"></i></div>
                        <h4 class="font-bold text-lg mb-2">आय प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">वार्षिक आय का डिजिटल प्रमाण पत्र।</p>
                        <a href="incomeform.html" class="bg-orange-50 text-orange-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-orange-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>
<!-- जाति प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-indigo-600 text-3xl mb-4"><i class="fas fa-users-rectangle"></i></div>
                        <h4 class="font-bold text-lg mb-2">जाति प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">SC / ST / OBC डिजिटल जाति प्रमाण पत्र।</p>
                        <a href="jati.html"  class="bg-indigo-50 text-indigo-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-indigo-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>
<!-- निवास प्रमाण पत्र -->
<div class="service-card bg-white p-5 rounded-xl shadow-sm border border-gray-100" data-category="certificates">
    <div class="text-blue-600 text-3xl mb-4"><i class="fas fa-home"></i></div>
    <h4 class="font-bold text-lg mb-2">निवास प्रमाण पत्र</h4>
    <p class="text-sm text-gray-600 mb-4">मध्यप्रदेश निवास का प्रमाण।</p>
   <a href="nivas.html" class="bg-blue-50 text-blue-600 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-blue-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
</div>
<!-- जन्म प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-pink-600 text-3xl mb-4"><i class="fas fa-baby"></i></div>
                        <h4 class="font-bold text-lg mb-2">जन्म प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">नया जन्म पंजीकरण एवं प्रमाण पत्र।</p>
                        <a href="janmpraman.html"   class="bg-pink-50 text-pink-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-pink-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>
<!-- मृत्यु प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-gray-700 text-3xl mb-4"><i class="fas fa-book-dead"></i></div>
                        <h4 class="font-bold text-lg mb-2">मृत्यु प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">मृत्यु पंजीकरण के लिए आवेदन।</p>
                        <a href="mratyupraman.html"   class="bg-gray-100 text-gray-800 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-gray-800 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>
<!-- विवाह प्रमाण पत्र -->
 <div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-red-600 text-3xl mb-4"><i class="fas fa-ring"></i></div>
                        <h4 class="font-bold text-lg mb-2">विवाह प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">शादी का ऑनलाइन रजिस्ट्रेशन।</p>
                        <a href="marriagepraman.html"   class="bg-red-50 text-red-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-red-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>

<!-- EWS प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="certificates">
    <div class="text-yellow-600 text-3xl mb-4"><i class="fas fa-certificate"></i></div>
    <h4 class="font-bold text-lg mb-2">EWS प्रमाण पत्र</h4>
    <p class="text-sm text-gray-600 mb-4">आर्थिक रूप से कमजोर वर्ग हेतु।</p>
    <a href="EWS.html"   class="bg-yellow-50 text-yellow-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-yellow-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
</div>
<!-- BPL प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="certificates">
    <div class="text-indigo-600 text-3xl mb-4"><i class="fas fa-hand-holding-usd"></i></div>
    <h4 class="font-bold text-lg mb-2">BPL प्रमाण पत्र</h4>
    <p class="text-sm text-gray-600 mb-4">गरीबी रेखा से नीचे परिवार हेतु।</p>
    <a href="BPL.html"   class="bg-indigo-50 text-indigo-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-indigo-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
</div>
<!-- विकलांगता प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="certificates">
    <div class="text-purple-600 text-3xl mb-4"><i class="fas fa-wheelchair"></i></div>
    <h4 class="font-bold text-lg mb-2">विकलांगता प्रमाण पत्र</h4>
    <p class="text-sm text-gray-600 mb-4">दिव्यांग प्रमाणन हेतु आवेदन।</p>
   <a href="divyang.html"   class="bg-purple-50 text-purple-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-purple-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
</div>
<!-- चरित्र प्रमाण पत्र -->
<div class="service-card bg-white p-6 rounded-2xl shadow-sm" data-category="certificates">
                        <div class="text-teal-600 text-3xl mb-4"><i class="fas fa-user-shield"></i></div>
                        <h4 class="font-bold text-lg mb-2">चरित्र प्रमाण पत्र</h4>
                        <p class="text-sm text-gray-600 mb-6">पुलिस सत्यापन एवं चरित्र प्रमाणन।</p>
                        <a href="cc.html"   class="bg-teal-50 text-teal-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-teal-600 hover:text-white transition">Apply Now <i class="fas fa-arrow-right"></i></a>
                    </div>

<!-- ration card -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-teal-600 text-3xl mb-4">
        <i class="fa-solid fa-wheat-awn"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">राशन कार्ड सेवा</h4>
    <p class="text-sm text-gray-600 mb-4">नया राशन कार्ड एवं पात्रता पर्ची आवेदन।</p>
    <a href="rationcard.html" class="bg-teal-50 text-teal-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-teal-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- aayushman card -->
     <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-teal-600 text-3xl mb-4">
        <i class="fa-solid fa-heart-pulse"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">आयुष्मान भारत</h4>
    <p class="text-sm text-gray-600 mb-4">5 लाख तक मुफ्त इलाज (Golden Card) आवेदन।</p>
    <a href="ayushman.html" class="bg-teal-50 text-teal-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-teal-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>   
<!-- ladli bahna -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-rose-500 text-3xl mb-4">
        <i class="fa-solid fa-person-dress"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">लाड़ली बहना योजना</h4>
    <p class="text-sm text-gray-600 mb-4">पात्रता जांच, भुगतान स्थिति एवं नया आवेदन।</p>
    <a href="ladli-behna.html" class="bg-rose-50 text-rose-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-rose-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- pm kishan -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-green-600 text-3xl mb-4">
        <i class="fa-solid fa-tractor"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">PM किसान सम्मान निधि</h4>
    <p class="text-sm text-gray-600 mb-4">नया पंजीकरण, e-KYC एवं किस्त की स्थिति जांचें।</p>
    <a href="pm-kisan.html" class="bg-green-50 text-green-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-green-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- sambal 2.0 -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-orange-500 text-3xl mb-4">
        <i class="fa-solid fa-id-card-clip"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">संबल 2.0 कार्ड</h4>
    <p class="text-sm text-gray-600 mb-4">नया पंजीयन, कार्ड डाउनलोड एवं आवेदन की स्थिति।</p>
    <a href="sambal.html" class="bg-orange-50 text-orange-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-orange-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- pm aawas yojna -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-indigo-600 text-3xl mb-4">
        <i class="fa-solid fa-house-chimney-window"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">प्रधानमंत्री आवास योजना</h4>
    <p class="text-sm text-gray-600 mb-4">आवास सूची में नाम देखें, नया आवेदन एवं स्टेटस।</p>
    <a href="awas-yojna.html" class="bg-indigo-50 text-indigo-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-indigo-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- vridhvastha pention -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-violet-600 text-3xl mb-4">
        <i class="fa-solid fa-person-cane"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">वृद्धावस्था पेंशन</h4>
    <p class="text-sm text-gray-600 mb-4">60 वर्ष से अधिक आयु के बुजुर्गों हेतु पेंशन आवेदन।</p>
    <a href="old-age-pension.html" class="bg-violet-50 text-violet-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-violet-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- bhu-bhag-naksha -->
     <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="land">
    <div class="text-amber-600 text-3xl mb-4">
        <i class="fa-solid fa-map-location-dot"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">भू-नक्शा (Land Map)</h4>
    <p class="text-sm text-gray-600 mb-4">अपनी जमीन का नक्शा देखें और डिजिटल कॉपी डाउनलोड करें।</p>
    <a href="bhu-naksha.html" class="bg-amber-50 text-amber-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-amber-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
    </div>
<!-- kishan credit card -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="land">
    <div class="text-yellow-600 text-3xl mb-4">
        <i class="fa-solid fa-credit-card"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">किसान क्रेडिट कार्ड (KCC)</h4>
    <p class="text-sm text-gray-600 mb-4">खेती-किसानी हेतु कम ब्याज पर लोन एवं नया KCC आवेदन।</p>
    <a href="kcc-apply.html" class="bg-yellow-50 text-yellow-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-yellow-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- e-uparjan -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="land">
    <div class="text-lime-600 text-3xl mb-4">
        <i class="fa-solid fa-wheat-check"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">ई-उपार्जन पंजीयन</h4>
    <p class="text-sm text-gray-600 mb-4">रबी/खरीफ फसल पंजीयन एवं किसान गिरदावरी जानकारी।</p>
    <a href="e-uperjan.html" class="bg-lime-50 text-lime-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-lime-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- mp rojgar panjiyan -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="job">
    <div class="text-blue-600 text-3xl mb-4">
        <i class="fa-solid fa-user-tie"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">MP रोजगार पंजीयन</h4>
    <p class="text-sm text-gray-600 mb-4">नया रोजगार पंजीयन, नवीनीकरण (Renewal) एवं प्रिंट।</p>
    <a href="rojgar-panjiyan.html" class="bg-blue-50 text-blue-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-blue-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- e-shramik card -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-sky-600 text-3xl mb-4">
        <i class="fa-solid fa-helmet-safety"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">ई-श्रम कार्ड (National)</h4>
    <p class="text-sm text-gray-600 mb-4">नया ई-श्रम पंजीयन एवं प्रोफाइल अपडेट (UAN Card)।</p>
    <a href="e-shram.html" class="bg-sky-50 text-sky-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-sky-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
 </div>
<!-- epf-pf -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="job">
    <div class="text-indigo-900 text-3xl mb-4">
        <i class="fa-solid fa-piggy-bank"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">EPF / PF सेवा</h4>
    <p class="text-sm text-gray-600 mb-4">UAN एक्टिवेशन, बैलेंस चेक एवं एडवांस PF निकासी।</p>
    <a href="EPF.html" class="bg-indigo-50 text-indigo-900 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-indigo-900 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- esic seva -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="job">
    <div class="text-slate-700 text-3xl mb-4">
        <i class="fa-solid fa-hospital-user"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">ESIC सेवा</h4>
    <p class="text-sm text-gray-600 mb-4">ई-पहचान कार्ड डाउनलोड एवं कर्मचारी बीमा जानकारी।</p>
    <a href="esic-service.html" class="bg-slate-100 text-slate-800 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-slate-700 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
</div>
<!-- seekho-kaamao -->
        <div class="service-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100" data-category="yojna">
    <div class="text-purple-600 text-3xl mb-4">
        <i class="fa-solid fa-graduation-cap"></i>
    </div>
    <h4 class="font-bold text-lg mb-2">सीखो कमाओ योजना</h4>
    <p class="text-sm text-gray-600 mb-4">नया छात्र पंजीयन, ट्रेनिंग कोर्स चयन एवं स्टाइपेंड स्थिति।</p>
    <a href="mmsky.html" class="bg-purple-50 text-purple-700 py-2 px-4 rounded-lg font-bold text-sm inline-flex items-center gap-2 hover:bg-purple-600 hover:text-white transition">
        Apply Now <i class="fas fa-arrow-right"></i>
    </a>
  </div>
</div>

                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer"></div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import {
  getFirestore,
  collection,
  query,
  where,
  getDocs,
  onSnapshot,
  orderBy
} from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";


/* ===== FIREBASE CONFIG ===== */
const firebaseConfig = {
  apiKey: "AIzaSyA-iZvVroV-H6aRs7X-mlnt_ra3_vnaNzg",
  authDomain: "allinone-aa89.firebaseapp.com",
  projectId: "allinone-aa89"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
/* ===== NOTIFICATION LISTENER (HOME PAGE) ===== */

const notifQuery = query(
  collection(db, "notifications"),
  where("active", "==", true),
  orderBy("createdAt", "desc")
);

onSnapshot(notifQuery, (snapshot) => {
  const drawerBox = document.getElementById("drawer-notif-list");
  if (!drawerBox) return;

  if (snapshot.empty) {
    drawerBox.innerHTML = `
      <p class="text-gray-400 text-sm text-center">
        कोई नई सूचना नहीं
      </p>`;
    return;
  }

  let html = "";
  snapshot.forEach(doc => {
    const n = doc.data();
    html += `
      <div class="border-l-4 border-blue-700 bg-blue-50 p-4 rounded-xl shadow-sm">
        <p class="font-bold text-sm text-gray-800">${n.title}</p>
        <p class="text-xs text-gray-600 mt-1">${n.message}</p>
      </div>
    `;
  });

  drawerBox.innerHTML = html;
});

/* ===== TRACK FUNCTION ===== */
window.trackApplication = async function () {
  const input = document
    .getElementById("trackInput")
    .value
    .trim()
    .toUpperCase();

  const resultBox = document.getElementById("trackResult");
  resultBox.classList.remove("hidden");

  if (!input.startsWith("AIO-")) {
    resultBox.className = "mt-4 text-red-600 font-bold";
    resultBox.innerText = "❌ सही आवेदन क्रमांक डालें (AIO-XXXXXX)";
    return;
  }

  const collections = [
    "applications",
    "samagra_ekyc_requests",
    "mpbhojApplications"
  ];

  let foundData = null;

  for (const col of collections) {
    const q = query(
      collection(db, col),
      where("applicationNumber", "==", input)
    );

    const snap = await getDocs(q);

    if (!snap.empty) {
      const docu = snap.docs[0];
      foundData = docu.data();
      break;
    }
  }

  if (!foundData) {
    resultBox.className = "mt-4 text-red-600 font-bold";
    resultBox.innerText = "❌ कोई आवेदन नहीं मिला";
    return;
  }

  let color =
    foundData.status === "complete" ? "text-green-600" :
    foundData.status === "reject"   ? "text-red-600" :
                                      "text-yellow-600";

  resultBox.className = `mt-4 font-bold text-lg ${color}`;

  resultBox.innerHTML = `
    📄 <b>आवेदन क्रमांक:</b> ${foundData.applicationNumber}<br>
    👤 <b>नाम:</b> ${foundData.applicantName || "-"}<br>
    🛠 <b>सेवा:</b> ${foundData.serviceType || "-"}<br>
    📌 <b>स्थिति:</b> ${foundData.status.toUpperCase()}
  `;
};
    const box = document.getElementById('moveable-notif');
    const trigger = document.getElementById('notif-trigger');
    const drawer = document.getElementById('notif-drawer');
    const overlay = document.getElementById('notif-overlay');
    const closeBtn = document.getElementById('close-drawer');

    let isMoving = false;
    let startX, startY;

    // --- Drag Logic ---
    box.addEventListener('touchstart', (e) => {
        isMoving = false;
        // Current position capture karna
        const rect = box.getBoundingClientRect();
        startX = e.touches[0].clientX - rect.left;
        startY = e.touches[0].clientY - rect.top;
    }, {passive: true});

    box.addEventListener('touchmove', (e) => {
        isMoving = true; 
        e.preventDefault(); // Scroll block karne ke liye
        
        let x = e.touches[0].clientX - startX;
        let y = e.touches[0].clientY - startY;

        // Screen boundaries
        const maxX = window.innerWidth - box.offsetWidth;
        const maxY = window.innerHeight - box.offsetHeight;
        
        // Limits apply karna
        x = Math.max(0, Math.min(x, maxX));
        y = Math.max(0, Math.min(y, maxY));

        // Direct style update
        box.style.left = x + 'px';
        box.style.top = y + 'px';
        box.style.bottom = 'auto';
        box.style.right = 'auto';
    }, {passive: false});

    // --- Toggle Functions ---
    function openDrawer() {
        if (navigator.vibrate) navigator.vibrate(50);
        drawer.classList.remove('translate-x-full');
        overlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeDrawer() {
        drawer.classList.add('translate-x-full');
        overlay.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    // Click handle (Desktop + Mobile Tap)
    trigger.addEventListener('click', (e) => {
        if (!isMoving) {
            openDrawer();
        }
    });

    closeBtn.addEventListener('click', closeDrawer);
    overlay.addEventListener('click', closeDrawer);
</script>

 <script src="assets/js/script.js?v=1.0"></script>

    <div id="moveable-notif" 
     class="fixed z-[100] touch-none select-none"
     style="width: 64px; height: 64px; top: calc(100vh - 100px); left: calc(100vw - 100px);">
    <button id="notif-trigger" 
            class="w-full h-full bg-gradient-to-tr from-blue-600 to-blue-400 text-white rounded-full shadow-[0_10px_25px_rgba(37,99,235,0.4)] flex items-center justify-center border-4 border-white active:scale-90 transition-transform relative">
        <i class="fas fa-bell text-2xl pointer-events-none"></i>
        <span class="absolute -top-1 -right-1 w-6 h-6 bg-red-600 border-2 border-white rounded-full text-[10px] flex items-center justify-center font-bold pointer-events-none animate-bounce">2</span>
    </button>
</div>

<div id="notif-drawer" class="fixed top-0 right-0 h-full w-85 max-w-[90%] bg-white/95 backdrop-blur-md shadow-[-10px_0_30px_rgba(0,0,0,0.1)] z-[110] transform translate-x-full transition-transform duration-500 cubic-bezier(0.4, 0, 0.2, 1) border-l border-gray-100 rounded-l-3xl">
    
    <div class="p-6 bg-gradient-to-r from-blue-900 to-blue-800 text-white flex justify-between items-center rounded-tl-3xl">
        <div>
            <h3 class="font-extrabold text-lg tracking-tight">महत्वपूर्ण सूचनाएं</h3>
            <p class="text-[10px] text-blue-200 uppercase tracking-widest mt-1">Updates & Alerts</p>
        </div>
        <button id="close-drawer" class="w-10 h-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors">
            <i class="fas fa-times text-xl"></i>
        </button>
    </div>
<div id="drawer-notif-list"
     class="p-5 space-y-4 overflow-y-auto h-[calc(100%-100px)]">
    <!-- Notifications Firebase se yaha auto aayengi -->
</div>
</div>
<div id="notif-overlay" class="fixed inset-0 bg-blue-900/20 backdrop-blur-sm z-[105] hidden transition-opacity duration-300"></div>
</body>
</html>
















































